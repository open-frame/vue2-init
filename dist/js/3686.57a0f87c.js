(self["webpackChunkedo_project"]=self["webpackChunkedo_project"]||[]).push([[3686],{3686:function(t,e,s){"use strict";s.r(e),s.d(e,{default:function(){return p}});var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"home"},[e("el-button-group",{directives:[{name:"show",rawName:"v-show",value:t.editLayout,expression:"editLayout"}],staticClass:"animate__animated animate__backInDown edit-layout-btns"},[e("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-check"},on:{click:t.okLayout}},[t._v("确认调整")]),e("el-button",{attrs:{size:"mini",icon:"el-icon-close"},on:{click:function(e){t.editLayout=!1}}},[t._v("关闭调整")])],1),[0===t.$route.meta.permissions.length?e("el-empty",{attrs:{description:"您没有模块权限"}},[e("a",{attrs:{target:"_blank",href:"https://work.weixin.qq.com/kfid/kfc4fd7cae33c6448f9"}},[t._v("咨询客服，申请模块权限")])]):t._e(),0===t.myCards.length?e("el-empty",{attrs:{description:"您未添加模块展示"}},[e("el-button",{attrs:{type:"primary"},on:{click:function(e){t.addLayout=!0}}},[t._v("添 加")])],1):t._e()],e("div",{staticClass:"panels"},[t._l(t.myCards,(function(s,a){return[e("vue-draggable-resizable",{directives:[{name:"permission",rawName:"v-permission",value:s.permission,expression:"card.permission"}],key:a,attrs:{w:s.w,h:s.h,x:s.x,y:s.y,"min-width":t.vdrConfig.minWidth,"enable-native-drag":!0,draggable:t.editLayout,resizable:t.editLayout},on:{activated:function(e){return t.changeCardItem(s)},resizestop:t.onResizstop,dragstop:t.onDragstop}},[s.error?e("el-result",{staticClass:"bg-white shadow-sm",attrs:{icon:"error",title:"组件加载错误",subTitle:s.name}},[e("a",{attrs:{slot:"extra",target:"_blank",href:"https://work.weixin.qq.com/kfid/kfc4fd7cae33c6448f9"},slot:"extra"},[t._v("反馈给客服")])]):[e("el-dropdown",{directives:[{name:"show",rawName:"v-show",value:t.editLayout,expression:"editLayout"}],staticClass:"handle-btns",on:{command:function(e){return t.settings(e,s,a)}}},[e("el-button",{attrs:{plain:"",type:"primary",size:"mini"}},[t._v("操作")]),e("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[e("el-dropdown-item",{attrs:{command:"0"}},[t._v("删除")])],1)],1),e("div",{staticClass:"bg-white shadow-sm module",style:{height:s.h-2+"px"}},[e("router-link",{staticClass:"d-block h5 p-2 m-0 text-black text-decoration-none",attrs:{to:s.url}},[t._v(t._s(s.name))]),e(s.component,{ref:s.component,refInFor:!0,tag:"component"})],1)]],2)]}))],2),t.myCards.length>0?e("el-popover",{attrs:{trigger:"hover"}},[e("ul",{staticClass:"list-group"},[e("li",{staticClass:"list-group-item",on:{click:function(e){t.addLayout=!0}}},[t._v("选择模块")]),e("li",{staticClass:"list-group-item",on:{click:function(e){t.editLayout=!0}}},[t._v("管理模块")])]),e("div",{staticClass:"el-icon-s-tools fs-3 set",attrs:{slot:"reference",title:"配置首页"},slot:"reference"})]):t._e(),e("panels-manage",{attrs:{"my-cards":t.myCards,show:t.addLayout},on:{close:function(e){t.addLayout=!1},success:t.editSuccess}})],2)},i=[],o=s(5907),n=s(9844),r=s(7195),d=s(4549),c=s.n(d),l={name:"home-index",components:{VueDraggableResizable:c(),"panels-manage":()=>s.e(7809).then(s.bind(s,7809))},directives:{permission:n.r},data(){return{vdrConfig:{editActive:!1,minWidth:300,tolerance:10,changeCard:{}},myCards:[],editLayout:!1,addLayout:!1}},mounted(){this.hasLayout()},methods:{hasLayout(){o.Z.homeLayout().then((t=>{if(0===t.code&&0!==t.data.length){this.myCards=JSON.parse(t.data[0].homeJson);for(let t in this.myCards)try{const e=s(4493)(`./${this.myCards[t].component}`);r["default"].component(this.myCards[t].component,e.default)}catch(e){this.myCards[t].error=!0}}}))},changeCardItem(t){this.editLayout&&(this.vdrConfig.changeCard=t)},onResizstop(t,e,s,a){this.myCards.filter((i=>(this.vdrConfig.changeCard.id===i.id&&(i.w=s,i.h=a,i.x=t,i.y=e),!0)))},onDragstop(t,e){this.myCards.map((s=>{this.vdrConfig.changeCard.id===s.id&&(s.x=t,s.y=e)}))},settings(t,e,s){switch(t){case"0":this.detelePanel(e,s);break;case"2":break}},detelePanel(t,e){this.myCards.splice(e,1)},okLayout(){o.Z.editHomeLayout({homeJson:JSON.stringify(this.myCards)}).then((t=>{0===t.code&&(this.hasLayout(),this.editLayout=!1,this.$message.success("调整成功"))}))},editSuccess(t){this.myCards=t,this.hasLayout()}},beforeRouteLeave(t,e,s){this.editLayout?this.$confirm("您在调整布局结构",{confirmButtonText:"保存并离开",cancelButtonText:"继续调整",type:"warning"}).then((()=>{this.okLayout(),s()})).catch((()=>{})):s()}},u=l,m=s(1001),h=(0,m.Z)(u,a,i,!1,null,"779178af",null),p=h.exports},4493:function(t,e,s){var a={"./new-users":2411,"./new-users.vue":2411,"./users-withdraw":6098,"./users-withdraw.vue":6098};function i(t){var e=o(t);return s(e)}function o(t){if(!s.o(a,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return a[t]}i.keys=function(){return Object.keys(a)},i.resolve=o,t.exports=i,i.id=4493}}]);