"use strict";(self["webpackChunkiov_platform"]=self["webpackChunkiov_platform"]||[]).push([[1487],{21487:function(e,t,a){a.r(t),a.d(t,{default:function(){return g}});var o=a(63598),l=a(90649),r=a(1985),i=a(67539),n=function(){var e=this,t=e._self._c;return t("el-card",{},[t(i.Z,{attrs:{loading:e.tableLoading,btnSpan:14,getData:e.getData,queryReset:e.queryReset}},[t("el-col",{attrs:{span:5}},[t(r.Z,{attrs:{animatLable:"",multiple:"","collapse-tags":""},model:{value:e.queryForm.deptCode,callback:function(t){e.$set(e.queryForm,"deptCode",t)},expression:"queryForm.deptCode"}})],1),t("el-col",{attrs:{span:5}},[t(l.Z,{attrs:{animatLable:"",type:"month",clearable:!1,format:"yyyy年MM月","value-format":"yyyy-MM","picker-options":e.pickerOptions,placeholder:"报表月份"},model:{value:e.queryForm.createTime,callback:function(t){e.$set(e.queryForm,"createTime",t)},expression:"queryForm.createTime"}})],1)],1),t("el-divider"),t(o.Z,{ref:"table",attrs:{name:e.queryForm.createTime+"站点月度运营报表",loading:e.tableLoading,data:e.tableData,height:"580","row-key":"uuid",total:e.total,"page-size":e.queryForm.pageSize,"current-page":e.queryForm.pageNum,derive:e.exporting},on:{"size-change":e.dataSizeChange,"current-change":e.handleCurrentChange,printing:e.printing},scopedSlots:e._u([{key:"columns",fn:function(){return[t("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"construction",label:"区域名称"}}),t("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"installNumber",label:"安装数量"}}),t("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"stationNumber",label:"站点数量"}}),t("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"userNumber",label:"用户总数"}}),t("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"monthBalance",label:"当月收益总额"}}),t("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"monthElec",label:"当月订单耗电量"}}),t("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"balance",label:"收益总额（已消费）"}}),t("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"onlineDays",label:"已上线运营天数"}}),t("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"dayAvgUse",label:"插座日平均使用量（个）"}}),t("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"dayAvgRate",label:"插座日平均使用率（%）"}}),t("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"dayOfflineRate",label:"站点插座日均离线率（%）"}}),t("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"durationAvg",label:"插座日平均使用时长（小时）"}}),t("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"balanceAvg",label:"单个插座日均收益（元）"}}),t("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"totalElectric",label:"截止当月底订单耗电量（度）"}})]},proxy:!0}])})],1)},s=[],p=a(5376),d=a(89176),m=a(30741),u={name:"operational-reports-station-monthly",mixins:[m.LI,m.I_,m.oA,m.vd],data(){return{organizations:[],pickerOptions:{disabledDate(e){return e.getTime()>Date.now()-864e5}},queryForm:{deptCode:[],createTime:"",pageSize:this.$tableDataSize,pageNum:1},tableLoading:!1,tableData:[],total:0}},created(){this.getOrganizationTree()},methods:{getOrganizationTree(){(0,p.eL)().then((e=>{this.organizations=e}))},getData(){let e;this.tableData=[];try{e={...this.queryForm,deptCode:this.queryForm.deptCode.join()}}catch(t){e={...this.queryForm,deptCode:[]}}(0,d.kq)(e).then((e=>{0===e.code&&(this.tableData=e.rows,this.total=e.total)}))},async exporting(e){let t={...this.queryForm,deptCode:this.queryForm.deptCode.join()};"2"===e&&(t.pageSize=this.total,t.pageNum=1);const a=await(0,d.kq)(t);if(0===a.code){const e=this.$refs.table.getColumns(),t=a.rows.map((t=>{let a=e.map((e=>[e.label,t[e.prop]]));return Object.fromEntries(a)}));return t}},printing(e){let t={...this.queryForm,deptCode:this.queryForm.deptCode.join()};"2"===e&&(t.pageSize=this.total,t.pageNum=1);const o=a(36801);(0,d.kq)(t).then((e=>{o({type:"json",printable:e.rows,scanStyles:!0,header:`<div style="text-align: center">\n                    <h2>站点月度运营报表</h2>\n                    <p style="margin-bottom: 20px;font-size: 12px;">${this.queryForm.createTime}</p>\n                  </div>`,properties:c,style:"@media print{@page {size:landscape}}",gridHeaderStyle:"border: 1px solid #000;text-align:center",gridStyle:"border: 1px solid #000;text-align:center"})}))}}};const c=[{field:"construction",displayName:"区域名称"},{field:"stationNumber",displayName:"站点数量"},{field:"installNumber",displayName:"安装数量"},{field:"onlineDays",displayName:"已上线运营天数"},{field:"userNumber",displayName:"用户总数"},{field:"dayAvgUse",displayName:"插座日平均使用量（个）"},{field:"balanceAvg",displayName:"单个插座日均收益（元）"},{field:"totalElectric",displayName:"截止当月底订单耗电量（度）"},{field:"balance",displayName:"截止到月底的收益总额（已消费）"},{field:"dayOfflineRate",displayName:"站点插座日均离线率（%）"},{field:"dayAvgRate",displayName:"插座日平均使用率（%）"},{field:"durationAvg",displayName:"插座日平均使用时长（小时）"}];var b=u,y=a(1001),h=(0,y.Z)(b,n,s,!1,null,"4682a604",null),g=h.exports}}]);