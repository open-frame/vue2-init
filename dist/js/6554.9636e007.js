"use strict";(self["webpackChunkiov_platform"]=self["webpackChunkiov_platform"]||[]).push([[6554],{86554:function(e,t,o){o.r(t),o.d(t,{default:function(){return h}});var a=o(63598),r=o(75267),l=o(19693),n=o(67539),i=function(){var e=this,t=e._self._c;return t("el-card",{staticClass:"config-area"},[t(n.Z,{attrs:{loading:e.tableLoading,getData:e.getData,queryReset:e.queryReset}},[t("el-col",{attrs:{span:4}},[t(r.Z,{attrs:{clearable:"",placeholder:"物业编号"},on:{change:e.pageReset},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getData.apply(null,arguments)}},model:{value:e.queryForm.propertyNo,callback:function(t){e.$set(e.queryForm,"propertyNo",t)},expression:"queryForm.propertyNo"}})],1),t("el-col",{attrs:{span:4}},[t(r.Z,{attrs:{clearable:"",placeholder:"物业名称"},on:{change:e.pageReset},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getData.apply(null,arguments)}},model:{value:e.queryForm.propertyName,callback:function(t){e.$set(e.queryForm,"propertyName",t)},expression:"queryForm.propertyName"}})],1),t("el-col",{attrs:{span:4}},[t(l.Z,{attrs:{animatLable:"",placeholder:"地址筛选",props:{checkStrictly:!0}},model:{value:e.queryForm.address3,callback:function(t){e.$set(e.queryForm,"address3",t)},expression:"queryForm.address3"}})],1),t("el-col",{attrs:{span:4}},[t(r.Z,{attrs:{clearable:"",placeholder:"社区名称"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getData.apply(null,arguments)}},model:{value:e.queryForm.community,callback:function(t){e.$set(e.queryForm,"community",t)},expression:"queryForm.community"}})],1),t("el-col",{attrs:{span:4}},[t(r.Z,{attrs:{clearable:"",placeholder:"联系人"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getData.apply(null,arguments)}},model:{value:e.queryForm.name,callback:function(t){e.$set(e.queryForm,"name",t)},expression:"queryForm.name"}})],1)],1),t("el-divider"),t(a.Z,{ref:"table",attrs:{loading:e.tableLoading,total:e.total,data:e.tableData,height:"550","row-key":"propertyNo","page-size":e.queryForm.pageSize,"current-page":e.queryForm.pageNum,derive:e.exporting},on:{"size-change":e.dataSizeChange,"current-change":e.handleCurrentChange},scopedSlots:e._u([{key:"left",fn:function(){return[t("el-button",{attrs:{size:"small",icon:"el-icon-plus"},on:{click:function(t){return e.editData("add")}}},[e._v("新增")])]},proxy:!0},{key:"columns",fn:function(){return[t("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"propertyNo",label:"物业编号"}}),t("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"propertyName",label:"物业名称"}}),t("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"shortName",label:"物业简称"}}),t("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"community",label:"社区名称"}}),t("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"propertyAddr",label:"详细地址"}}),t("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"kwhPrc",label:"电费(元)"}}),t("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"powerReadDay",label:"抄表日期"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s("每月"+t.row.powerReadDay+"日")+" ")]}}])}),t("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"name",label:"联系人"}}),t("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"tel",label:"联系电话"}}),t("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"createTime",label:"创建时间"}}),t("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"remark",label:"备注"}}),t("el-table-column",{attrs:{label:"操作",width:"160"},scopedSlots:e._u([{key:"default",fn:function(o){return[t("el-button",{attrs:{plain:"",size:"mini",type:"primary"},on:{click:function(t){return e.editData("modification",o.row)}}},[e._v("修改")]),t("el-button",{attrs:{plain:"",size:"mini",type:"danger"},on:{click:function(t){return e.deleteing("one",o.row)}}},[e._v("删除")])]}}])})]},proxy:!0}])}),t("community-detail",{attrs:{show:e.communityDetailDialog,data:e.communityDetail},on:{close:e.closeCommunityDetail,success:e.getData}})],1)},s=[],u=o(24779),c=o(30741),p={name:"management-community-index",mixins:[c.LI,c.I_,c.oA,c.vd],components:{"community-detail":()=>o.e(4931).then(o.bind(o,94931))},data(){return{tableLoading:!1,queryForm:{pageNum:1,pageSize:this.$tableDataSize,address3:[],propertyNo:"",propertyName:"",provinceCode:"",cityCode:"",districtCode:"",community:"",name:""},tableData:[],total:0,moreSelectData:[],communityDetailDialog:!1,communityDetail:{}}},watch:{"queryForm.address3"(e){this.queryForm.provinceCode=e[0]||"",this.queryForm.cityCode=e[1]||"",this.queryForm.districtCode=e[2]||""}},methods:{getData(){this.tableData=[],this.tableLoading=!0,(0,u.hf)(this.queryForm).then((e=>{this.tableLoading=!1,0===e.code&&(this.tableData=e.rows,this.total=e.total)})).catch((()=>{this.tableLoading=!1}))},editData(e,t){this.communityDetailDialog=!0,"add"===e||setTimeout((()=>{this.communityDetail={...t}}),200)},closeCommunityDetail(e){this.communityDetailDialog=e,this.communityDetail={}},deleteing(e,t){this.$confirm("一旦删除不可恢复，确定删除？","删除提醒").then((()=>{let o="";"one"===e&&(o=t.propertyNo),(0,u.cL)({propertyNo:o}).then((e=>{0===e.code&&(this.$message.success("已删除"),this.getData(),this.moreSelectData=[])}))})).catch((()=>{}))},async exporting(e){let t={...this.queryForm};"2"===e&&(t.pageSize=this.total,t.pageNum=1);const o=await(0,u.hf)(t);if(0===o.code){const e=this.$refs.table.getColumns(),t=o.rows.map((t=>{let o=e.map((e=>[e.label,t[e.prop]]));return Object.fromEntries(o)}));return t}}}},m=p,y=o(1001),d=(0,y.Z)(m,i,s,!1,null,"4b384024",null),h=d.exports}}]);