(self["webpackChunkedo_project"]=self["webpackChunkedo_project"]||[]).push([[3669,3910,6461],{3669:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return g}});var a=function(){var e=this,t=e._self._c;return t("el-card",{},[t("el-row",{staticClass:"filters",attrs:{gutter:30}},[t("el-col",{staticClass:"text-end",attrs:{span:24}},[t("el-button",{attrs:{size:"medium",type:"primary"},on:{click:e.getData}},[e._v("搜索")]),t("el-button",{attrs:{size:"medium"},on:{click:e.reset}},[e._v("重置")])],1)],1),t("el-divider"),t("edo-table",{ref:"order-table",attrs:{loading:e.loading,total:e.total,data:e.tableData,height:"560","row-key":"orderId","page-size":e.queryForm.pageSize,"current-page":e.queryForm.pageNum},on:{"current-change":e.handleCurrentChange,"size-change":e.dataSizeChange,exporting:e.exporting},scopedSlots:e._u([{key:"columns",fn:function(){return[t("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"processInstanceId",label:"流程id"}}),t("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"processName",label:"流程名称"}}),t("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"processInstanceStartTime",label:"流程开始时间"}}),t("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"processInstanceEndTime",label:"流程结束时间"}}),t("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"taskId",label:"任务id"}}),t("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"taskName",label:"任务名称"}}),t("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"taskStarTime",label:"任务开始时间"}}),t("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"taskEndTime",label:"任务结束时间"}}),t("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"assignee",label:"处理人"}}),t("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"owner",label:"处理结果"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e._f("CodeTransforText")(t.row.owner,e.dropdowns.owner))+" ")]}}])}),t("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"description",label:"审核意见"}}),t("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"操作",width:"90"},scopedSlots:e._u([{key:"default",fn:function(o){return[t("el-button",{attrs:{plain:"",type:"primary"},on:{click:function(t){return e.openDetail(o.row)}}},[e._v("详情")])]}}])})]},proxy:!0}])}),t(e.componentName,{ref:e.componentName,tag:"component",attrs:{params:e.componentParams,show:e.formDialog},on:{close:function(t){e.formDialog=!1}}})],1)},r=[],s=o(7195),n=o(6461),l=o(6795),i=o(1182),c=o(4287),p=o(4116),m=o(4996),u=o(2503),d={name:"",mixins:[m.Z,p.Z,u.Z],filters:{CodeTransforText:c.C},data(){return{loading:!1,queryForm:{processDefinitionKey:"",pageSize:this.$tableDataSize,pageNum:1},dropdowns:{owner:[]},tableData:[],total:0,componentName:"",formDialog:!1,componentParams:{}}},created(){this.getData()},methods:{getDropdowns(){l.Z.dropdowns("426807").then((e=>{0===e.code&&(this.dropdowns.owner=e.data)}))},getData(){this.loading=!0,this.tableData=[],n.Z.myFinished(this.queryForm).then((e=>{this.loading=!1,0===e.code&&(this.total=e.total,this.tableData=e.rows)}))},async openDetail(e){this.params=e;try{const t=await o(3421)(`./${e.formKey}.vue`);this.componentName=e.formKey.replace("/","-"),s["default"].component(this.componentName,t.default),this.componentParams=e,this.formDialog=!0}catch(t){this.$message.info("找不到formKey，请联系平台")}},exporting(e){if(this.tableData.length<1)return this.$message.warning("无数据可导"),!1;const t=this.$loading({lock:!0,text:"正在获取数据...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});let o={...this.queryForm};"2"===e&&(o.pageSize=this.total,o.pageNum=1),n.Z.myFinished(o).then((e=>{if(0===e.code){t.text="正在下载...";const o=e.rows.map((e=>({"流程id":e.processInstanceId,"流程名称":e.processName,"任务开始时间":e.taskCreateTime,"任务名称":e.taskName,"流程开始时间":e.startTime,"处理人":e.assignee,"任务id":e.taskId})));i.Z.excel(o,"我的已办")}})).finally((()=>{t.close()}))}}},f=d,h=o(1001),w=(0,h.Z)(f,a,r,!1,null,"b50668ee",null),g=w.exports},6461:function(e,t,o){"use strict";var a=o(7558);t["Z"]={myTask:(e,t)=>a.Z.get("/service/demo/myTask.json",e,t),taskEntrust:(e,t)=>a.Z.post("/service/demo/setTaskAssignee",e,t),myFinished:(e,t)=>a.Z.get("/service/demo/myFinished.json",e,t)}},3421:function(e,t,o){var a={"./stationRestore/complete.vue":[4976,4976],"./stationRestore/execute.vue":[5923,5923,4287],"./stationRestore/process-info.vue":[3145,3145]};function r(e){if(!o.o(a,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=a[e],r=t[0];return Promise.all(t.slice(1).map(o.e)).then((function(){return o(r)}))}r.keys=function(){return Object.keys(a)},r.id=3421,e.exports=r}}]);