"use strict";(self["webpackChunkiov_platform"]=self["webpackChunkiov_platform"]||[]).push([[2816],{12816:function(e,t,a){a.r(t),a.d(t,{default:function(){return f}});var o=a(63598),l=a(12025),r=a(75267),i=a(90649),n=a(67539),s=function(){var e=this,t=e._self._c;return t("el-card",[t(n.Z,{attrs:{loading:e.tableLoading,btnSpan:12,getData:e.getData,queryReset:e.queryReset}},[t("el-col",{attrs:{span:4}},[t(i.Z,{attrs:{size:"medium",type:"datetimerange",placeholder:"入库时间段",format:"yyyy-MM-dd HH:mm:ss","value-format":"yyyy-MM-dd HH:mm:ss","picker-options":e.pickerOptions},on:{change:e.selectTime},model:{value:e.queryForm.timeQuantum,callback:function(t){e.$set(e.queryForm,"timeQuantum",t)},expression:"queryForm.timeQuantum"}})],1),t("el-col",{attrs:{span:4}},[t(r.Z,{attrs:{clearable:"",size:"medium",placeholder:"安装人"},on:{change:e.pageReset},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getData.apply(null,arguments)}},model:{value:e.queryForm.updateBy,callback:function(t){e.$set(e.queryForm,"updateBy",t)},expression:"queryForm.updateBy"}})],1),t("el-col",{attrs:{span:4}},[t(l.Z,{attrs:{animatLable:""},on:{change:e.pageReset},model:{value:e.queryForm.stationNo,callback:function(t){e.$set(e.queryForm,"stationNo",t)},expression:"queryForm.stationNo"}})],1)],1),t("el-divider"),t(o.Z,{ref:"table",attrs:{loading:e.tableLoading,total:e.total,data:e.tableData,height:"550","page-size":e.queryForm.pageSize,"current-page":e.queryForm.pageNum,derive:e.exporting},on:{"size-change":e.dataSizeChange,"current-change":e.handleCurrentChange},scopedSlots:e._u([{key:"columns",fn:function(){return[t("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"deptName",label:"隶属组织"}}),t("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"updateBy",label:"安装人"}}),t("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"installNo",label:"安装单号"}}),t("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"updateTime",label:"安装时间"}}),t("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"stationName",label:"安装电站"}}),t("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"installType",label:"操作类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e._f("transfortext")(t.row.installType,e.dropdowns.installType))+" ")]}}])}),t("el-table-column",{attrs:{label:"操作",width:"90"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{plain:"",type:"primary",size:"mini"},on:{click:function(t){return e.seeDdetail(a.row)}}},[e._v(" 明细 ")])]}}])})]},proxy:!0}])}),t("install-dialog",{attrs:{show:e.detailDialog,data:e.thisData},on:{close:e.closeDetailDialog}})],1)},u=[],p=a(74713),d=a(5376),m=a(90886),c=a(30741),h={name:"property-query-index",mixins:[c.LI,c.I_,c.oA,c.vd],components:{"install-dialog":()=>a.e(8243).then(a.bind(a,58243))},filters:{transfortext:m.h},data(){return{pickerOptions:{disabledDate(e){return e.getTime()>Date.now()}},tableLoading:!1,dropdowns:{installType:[]},queryForm:{updateBy:"",stationNo:"",startTime:"",endTime:"",modelCode:"",timeQuantum:[],pageSize:this.$tableDataSize,pageNum:1},tableData:[],total:0,detailDialog:!1,thisData:{}}},created(){this.getDropdowns()},methods:{getDropdowns(){(0,d.Wl)("63002").then((e=>{0===e.code&&(this.dropdowns.installType=e.data)}))},selectTime(e){this.queryForm.pageNum=1,e?(this.queryForm.startTime=e[0],this.queryForm.endTime=e[1]):(this.queryForm.startTime="",this.queryForm.endTime="")},getData(){this.tableLoading=!0,this.tableData=[],(0,p.qz)(this.queryForm).then((e=>{this.tableLoading=!1,0===e.code&&(this.tableData=e.rows,this.total=e.total)})).catch((()=>{this.tableLoading=!1}))},seeDdetail(e){this.detailDialog=!0,this.thisData=e},closeDetailDialog(e){this.thisData={},this.detailDialog=e},async exporting(e){let t={...this.queryForm};"2"===e&&(t.pageSize=this.total,t.pageNum=1);const a=await(0,p.qz)(t);if(0===a.code){const e=this.$refs.table.getColumns(),t=a.rows.map((t=>{let a=e.map((e=>[e.label,`${(0,m.h)(t[e.prop],this.dropdowns[e.prop])}`]));return Object.fromEntries(a)}));return t}}}},y=h,g=a(1001),b=(0,g.Z)(y,s,u,!1,null,"79dc0a73",null),f=b.exports}}]);