"use strict";(self["webpackChunkiov_platform"]=self["webpackChunkiov_platform"]||[]).push([[4252],{24252:function(t,e,o){o.r(e),o.d(e,{default:function(){return m}});var a=o(63598),r=function(){var t=this,e=t._self._c;return e("el-dialog",{attrs:{"close-on-click-modal":!1,title:"领用明细","append-to-body":!0,"before-close":t.close,"modal-append-to-body":!1,visible:t.show}},[e(a.Z,{ref:"table",attrs:{loading:t.tableLoading,total:t.total,data:t.tableData,height:"460","page-size":t.queryForm.pageSize,"current-page":t.queryForm.pageNum,derive:t.exporting},on:{"size-change":t.dataSizeChange,"current-change":t.handleCurrentChange},scopedSlots:t._u([{key:"right",fn:function(){return[e("el-tag",{attrs:{type:"info"}},[t._v(t._s(t.data.borrowFlag)+"("+t._s(t.data.loginName)+")")]),e("el-tag",[t._v(t._s(t._f("transfortext")(t.queryForm.typeCode,t.dropdowns.typeCode)))])]},proxy:!0},{key:"columns",fn:function(){return[e("el-table-column",{attrs:{prop:"dateTime","show-overflow-tooltip":"",label:"领用时间"}}),e("el-table-column",{attrs:{prop:"ioWhId","show-overflow-tooltip":"",label:"单号"}}),e("el-table-column",{attrs:{prop:"stakeName","show-overflow-tooltip":"",label:"设备名称"}}),e("el-table-column",{attrs:{prop:"stakeNo","show-overflow-tooltip":"",label:"设备编号"}}),e("el-table-column",{attrs:{prop:"curStatusCode","show-overflow-tooltip":"",label:"设备状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("transfortext")(e.row.curStatusCode,t.dropdowns.curStatusCode))+" ")]}}])})]},proxy:!0}])}),e("span",{attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:t.close}},[t._v("知道了")])],1)],1)},l=[],s=o(74713),n=o(5376),i=o(30741),p=o(90886),d={name:"property-supplier-index",mixins:[i.oA],filters:{transfortext:p.h},data(){return{tableLoading:!1,dropdowns:{typeCode:[],modelCode:[],curStatusCode:[]},queryForm:{fetchEmpName:"",typeCode:"",pageSize:this.$tableDataSize,pageNum:1},tableData:[],total:0}},props:{show:{type:Boolean,default:!1},data:{type:Object,default(){return{}}}},watch:{show(t){t&&(this.getDropdowns(),this.queryForm.pageSize=this.$tableDataSize,this.queryForm.pageNum=1,this.queryForm.fetchEmpName=this.data.loginName,this.queryForm.typeCode=this.data.type,this.getData())}},methods:{getData(){this.tableData=[],this.tableLoading=!0,(0,s.MY)(this.queryForm).then((t=>{this.tableLoading=!1,0===t.code&&(this.tableData=t.rows,this.total=t.total)})).catch((()=>{this.tableLoading=!1}))},getDropdowns(){(0,n.Wl)("3004").then((t=>{0===t.code&&(this.dropdowns.typeCode=t.data)})),(0,n.Wl)("45259").then((t=>{0===t.code&&(this.dropdowns.curStatusCode=t.data)}))},async exporting(t){let e={...this.queryForm};"2"===t&&(e.pageSize=this.total,e.pageNum=1);const o=await(0,s.MY)(e);if(0===o.code){const t=this.$refs.table.getColumns(),e=o.rows.map((e=>{let o=t.map((t=>[t.label,`${(0,p.h)(e[t.prop],this.dropdowns[t.prop])}`]));return Object.fromEntries(o)}));return e}},close(){this.$emit("close",!1)}}},u=d,h=o(1001),c=(0,h.Z)(u,r,l,!1,null,"67542952",null),m=c.exports}}]);