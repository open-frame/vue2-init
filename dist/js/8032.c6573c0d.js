"use strict";(self["webpackChunkiov_platform"]=self["webpackChunkiov_platform"]||[]).push([[8032,6351],{83693:function(t,o,e){e.d(o,{B0:function(){return i},Db:function(){return u},Hf:function(){return m},IR:function(){return n},Iu:function(){return l},Ww:function(){return h},lB:function(){return a},o5:function(){return d},rJ:function(){return r},tJ:function(){return c},tZ:function(){return f},ts:function(){return p}});var s=e(92617);function r(t,o){return s.o.post("/flow/monitor/listProcess",t,o)}function n(t,o){return(0,s.o)({url:"/flow/monitor/getImage",method:"post",responseType:"blob",data:t,...o})}function i(t,o){return s.o.post("/flow/monitor/approveDetails",t,o)}function c(t,o){return s.o.post("/flow/stationRestore/details",t,o)}function a(t,o){return s.o.post("/flow/monitor/getProcessList",t,o)}function u(t,o){return s.o.post("/flow/monitor/suspendProcess",t,o)}function l(t,o){return s.o.post("/flow/stationRestore/add",t,o)}function f(t,o){return s.o.post("/flow/stationRestore/list",t,o)}function d(t,o){return s.o.post("/flow/stationRestore/complete",t,o)}function p(t,o){return s.o.post("/flow/monitor/getUserTaskNode",t,o)}function m(t,o){return s.o.post("/flow/monitor/endProcess",t,o)}function h(t,o){return s.o.post("/flow/monitor/taskJump",t,o)}},46351:function(t,o,e){e.r(o),e.d(o,{default:function(){return f}});var s=function(){var t=this,o=t._self._c;return o("el-dialog",{attrs:{title:"流程回退","close-on-click-modal":!1,"before-close":t.close,"append-to-body":!0,"modal-append-to-body":!1,visible:t.show}},[o("img",{staticClass:"mb-5",attrs:{src:t.processImg,alt:"流程图",srcset:""}}),o("el-form",{ref:"form-dom",attrs:{model:t.form,rules:t.rules,"label-width":"100px"}},[o("el-form-item",{attrs:{label:"回退位置",prop:"sid"}},[o("el-select",{attrs:{filterable:"",clearable:"",size:"medium",placeholder:""},model:{value:t.form.sid,callback:function(o){t.$set(t.form,"sid",o)},expression:"form.sid"}},t._l(t.dropdowns.currentTask,(function(t,e){return o("el-option",{key:e,attrs:{label:t.taskName,value:t.sid}})})),1)],1)],1),o("span",{attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{type:"primary"},on:{click:t.submitForm}},[t._v("确 定")]),o("el-button",{on:{click:t.close}},[t._v("关 闭")])],1)],1)},r=[],n=e(83693),i={name:"",data(){return this.rules=c,{dropdowns:{currentTask:[]},processImg:"",form:{sid:""}}},props:{show:{type:Boolean,default:!1},data:{type:Object,required:!0}},watch:{show(t){t&&(this.openProsess(),this.nowTask())}},methods:{openProsess(t){(0,n.IR)({processInstanceId:this.data.processInstanceId}).then((t=>{const o=new Blob([t]);this.processImg=URL.createObjectURL(o)}))},nowTask(){(0,n.ts)({processDefinitionKey:this.data.processDefinitionKey}).then((t=>{0===t.code&&t.data&&(this.dropdowns.currentTask=t.data)}))},submitForm(){this.$refs["form-dom"].validate((t=>{t&&(0,n.Ww)({taskId:this.data.taskId,...this.form}).then((t=>{0===t.code&&(this.$message.success(t.msg),this.$emit("success"),this.close())}))}))},close(){this.$refs["form-dom"].resetFields(),this.$emit("close",!1),URL.revokeObjectURL(this.processImg),this.processImg=""}}};const c={sid:[{required:!0,message:"请选择要回退到的位置",trigger:"change"}]};var a=i,u=e(1001),l=(0,u.Z)(a,s,r,!1,null,"7c2daf52",null),f=l.exports}}]);