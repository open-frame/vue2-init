"use strict";(self["webpackChunkiov_platform"]=self["webpackChunkiov_platform"]||[]).push([[7412],{7412:function(e,t,i){i.r(t),i.d(t,{default:function(){return h}});var n=i(1985),o=i(5267),a=i(9413),r=function(){var e=this,t=e._self._c;return t("el-card",{staticClass:"role"},[t(a.Z,{attrs:{loading:e.loading,btnSpan:16,getData:e.getData,queryReset:e.queryReset}},[t("el-col",{attrs:{span:4}},[t(o.Z,{attrs:{clearable:"",size:"medium",placeholder:"字典名称"},on:{change:e.pageReset},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getData.apply(null,arguments)}},model:{value:e.queryForm.comment,callback:function(t){e.$set(e.queryForm,"comment",t)},expression:"queryForm.comment"}})],1),t("el-col",{attrs:{span:4}},[t(o.Z,{attrs:{clearable:"",size:"medium",placeholder:"字典编号"},on:{change:e.pageReset},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getData.apply(null,arguments)}},model:{value:e.queryForm.codeType,callback:function(t){e.$set(e.queryForm,"codeType",t)},expression:"queryForm.codeType"}})],1)],1),t("el-divider"),t(n.Z,{ref:"table",attrs:{loading:e.loading,total:e.total,data:e.tableData,height:"570",border:!1,"row-key":"codeType","page-size":e.queryForm.pageSize,"current-page":e.queryForm.pageNum,derive:e.exporting},on:{"current-change":e.handleCurrentChange,"size-change":e.dataSizeChange},scopedSlots:e._u([{key:"left",fn:function(){return[t("el-button",{attrs:{size:"small",icon:"el-icon-plus"},on:{click:function(t){return e.editing("add")}}},[e._v("新增")])]},proxy:!0},{key:"columns",fn:function(){return[t("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"字典编号",prop:"codeType"}}),t("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"字典名称",prop:"comment"}}),t("el-table-column",{attrs:{label:"操作",width:"240",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(i){return[t("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.editing("modification",i.row)}}},[e._v("编辑")]),t("el-button",{attrs:{type:"info",size:"mini"},on:{click:function(t){return e.openEditDictionDrawer(i.row)}}},[e._v("配置")]),t("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(t){return e.deleteing(i.row)}}},[e._v("删除")])]}}])})]},proxy:!0}])}),t("dictionariesList",{attrs:{show:e.editDictionDrawer,data:e.dictionDetail},on:{"before-close":e.closeDictionariesDrawer}})],1)},c=[],l=i(4984),s=i(9666),d=i(741),u={name:"system-dictionaries-index",mixins:[d.LI,d.I_,d.oA,d.vd],components:{dictionariesList:s["default"]},data(){return{loading:!1,queryForm:{codeType:"",comment:"",pageSize:this.$tableDataSize,pageNum:1},tableData:[],total:0,editDictionDrawer:!1,dictionDetail:{}}},methods:{getData(){this.tableData=[],this.loading=!0,(0,l.yX)(this.queryForm).then((e=>{this.loading=!1,0===e.code&&(this.total=e.total,this.tableData=e.rows)})).catch((()=>{this.loading=!1}))},editing(e,t){let i,n;"add"===e?i="添加字典":(i="修改字典",n=t.comment);const o=this;this.$prompt("请输入字典名称：",i,{inputValue:n,beforeClose(e,t,i){if("confirm"===e&&!t.inputValue)return this.$message.warning("不能为空");i()}}).then((i=>{if(!i.value)return;if("modification"===e&&i.value===t.comment)return;const n={addDictionarie:l.addDictionarie,modificationDictionarie:l.modificationDictionarie};n["add"===e?"addDictionarie":"modificationDictionarie"]({comment:i.value,codeType:"modification"===e?t.codeType:""}).then((e=>{0===e.code&&(o.$message.success(e.msg),o.getData())}))})).catch((()=>{}))},deleteing(e){this.$confirm("一旦删除不可恢复，确定删除？","删除提醒",{distinguishCancelAndClose:!0,confirmButtonText:"确定",cancelButtonText:"放弃"}).then((()=>{(0,l.deleteDictionarie)({codeType:e.codeType,comment:e.comment}).then((e=>{0===e.code&&(this.$message.success(e.msg),this.getData())}))})).catch((()=>{}))},openEditDictionDrawer(e){this.editDictionDrawer=!0,this.dictionDetail=e},closeDictionariesDrawer(e){this.editDictionDrawer=e},async exporting(e){let t={...this.queryForm};"2"===e&&(t.pageSize=this.total,t.pageNum=1);const i=await(0,l.yX)(t);if(0===i.code){const e=this.$refs.table.getColumns(),t=i.rows.map((t=>{let i=e.map((e=>[e.label,t[e.prop]]));return Object.fromEntries(i)}));return t}}}},m=u,p=i(1001),f=(0,p.Z)(m,r,c,!1,null,"31eed304",null),h=f.exports}}]);