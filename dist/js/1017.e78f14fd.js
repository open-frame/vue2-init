"use strict";(self["webpackChunkiov_platform"]=self["webpackChunkiov_platform"]||[]).push([[1017],{81017:function(e,s,t){t.r(s),t.d(s,{default:function(){return h}});var o=t(1985),i=t(79685),r=function(){var e=this,s=e._self._c;return s("el-dialog",{attrs:{"close-on-click-modal":!1,title:"资产出库","append-to-body":!0,"before-close":e.close,"modal-append-to-body":!1,visible:e.show}},[s(i.Z,{ref:"selecte-device-table",attrs:{show:e.show},on:{change:e.selectionDevice}}),s("el-divider"),e.issueDeviceForm.stakes.length>0?s("el-form",{ref:"issueDeviceForm",attrs:{"label-width":"115px",model:e.issueDeviceForm,rules:e.issueDeviceRules}},[s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"出库类型",prop:"ioWhReasonCode"}},[s("el-select",{attrs:{filterable:"","default-first-option":"",clearable:"",size:"medium",placeholder:"出库类型"},model:{value:e.issueDeviceForm.ioWhReasonCode,callback:function(s){e.$set(e.issueDeviceForm,"ioWhReasonCode",s)},expression:"issueDeviceForm.ioWhReasonCode"}},e._l(e.dropdowns.ioWhReasonCode,(function(e,t){return s("el-option",{key:t,attrs:{label:e.code_name,value:e.code_value}})})),1)],1)],1),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"所属部门",prop:"rcvReturnDept"}},[s(o.Z,{model:{value:e.issueDeviceForm.rcvReturnDept,callback:function(s){e.$set(e.issueDeviceForm,"rcvReturnDept",s)},expression:"issueDeviceForm.rcvReturnDept"}})],1)],1),s("el-col",{attrs:{span:24}},[s("el-form-item",{attrs:{label:"出库用途",prop:"ioWhReason"}},[s("el-input",{attrs:{clearable:"",type:"textarea"},model:{value:e.issueDeviceForm.ioWhReason,callback:function(s){e.$set(e.issueDeviceForm,"ioWhReason",s)},expression:"issueDeviceForm.ioWhReason"}})],1)],1)],1):e._e(),s("span",{attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{type:"primary"},on:{click:e.showTip}},[e._v("出库")]),s("el-button",{on:{click:e.close}},[e._v("关闭")]),s("el-dialog",{attrs:{"show-close":!1,"append-to-body":!0,"close-on-click-modal":!1,"modal-append-to-body":!1,visible:e.centerDialogVisible,width:"330px",center:""},on:{"update:visible":function(s){e.centerDialogVisible=s}}},[s("el-result",{attrs:{icon:"warning",subTitle:"是否确认出库？"}},[s("template",{slot:"extra"},[s("el-button",{attrs:{type:"primary"},on:{click:e.issueDevice}},[e._v("是")]),s("el-button",{attrs:{type:"info"},on:{click:function(s){e.centerDialogVisible=!1}}},[e._v("否")]),s("el-button",{on:{click:e.close}},[e._v("关闭")])],1)],2)],1)],1)],1)},l=[],a=t(74713),c=t(5376),n={name:"",props:{show:{type:Boolean,default:!1},detail:{type:Object,default(){return{}}},success:{type:Function}},data(){return this.issueDeviceRules=u,{dropdowns:{ioWhReasonCode:[]},issueDeviceForm:{rcvReturnDept:"",ioWhReason:"",stakes:[],typeCode:"",merchantNo:"",ioWhReasonCode:"",whNo:""},centerDialogVisible:!1}},watch:{show(e){e&&this.getDropdowns()}},methods:{getDropdowns(){(0,c.Wl)("45257").then((e=>{0===e.code&&(this.dropdowns.ioWhReasonCode=e.data)}))},selectionDevice(e,s){this.issueDeviceForm.stakes=e,this.issueDeviceForm.typeCode=s.typeCode,this.issueDeviceForm.whNo=s.whNo},showTip(){if(this.issueDeviceForm.stakes.length<1)return this.$message.error("请筛选出设备，选择出库设备");this.$refs["issueDeviceForm"].validate((e=>{e&&(this.centerDialogVisible=!0)}))},issueDevice(){(0,a.J$)(this.issueDeviceForm).then((e=>{0===e.code&&(this.$emit("success"),this.$message.success(e.msg),this.close())}))},close(){this.$emit("close",!1),this.centerDialogVisible=!1,this.issueDeviceForm.stakes=[];try{this.$refs["issueDeviceForm"].resetFields(),this.$refs["selecte-device-table"].resetFields()}catch(e){}}}};const u={ioWhReasonCode:[{required:!0,message:"请选择出库类型",trigger:"change"}],rcvReturnDept:[{required:!0,message:"请选择所属部门",trigger:"change"}],fetchEmpName:[{required:!0,message:"请输入领用人",trigger:"blur"},{pattern:/^[^<|>|(|)|+|-|*|/|%|=|{|}]*$/,message:"禁止< > ( ) + - * / % = { }等特殊字符",trigger:"blur"},{min:2,max:48,message:"长度在 2 到 48 个字符",trigger:"blur"}],ioWhReason:[{required:!0,message:"请输入出库用途",trigger:"blur"},{pattern:/^[^<|>|(|)|+|-|*|/|%|=|{|}]*$/,message:"禁止< > ( ) + - * / % = { }等特殊字符",trigger:"blur"},{min:3,max:48,message:"长度在 3 到 48 个字符",trigger:"blur"}]};var d=n,m=t(1001),p=(0,m.Z)(d,r,l,!1,null,"21c06b39",null),h=p.exports}}]);