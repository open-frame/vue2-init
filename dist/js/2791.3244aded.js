"use strict";(self["webpackChunkedo_project"]=self["webpackChunkedo_project"]||[]).push([[2791],{2791:function(e,i,t){t.r(i),t.d(i,{default:function(){return d}});var o=function(){var e=this,i=e._self._c;return i("div",{},[i("el-drawer",{attrs:{title:e.data.comment+"列表",size:"40%",visible:e.show,direction:"rtl","append-to-body":!0,"modal-append-to-body":!1,"before-close":e.handleClose},on:{"update:visible":function(i){e.show=i}}},[i("div",{staticClass:"p-3"},[i("div",{staticClass:"d-flex justify-content-between"},[i("div",[i("el-input",{attrs:{size:"mini",clearable:"",placeholder:"按名称筛选"+e.data.comment},on:{clear:e.getData},model:{value:e.queryForm.name,callback:function(i){e.$set(e.queryForm,"name",i)},expression:"queryForm.name"}},[i("el-button",{attrs:{slot:"append"},on:{click:e.getData},slot:"append"},[e._v("搜索")])],1)],1),i("div",{staticClass:"text-end"},[i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){return e.openDictionarieFormDialog("add")}}},[e._v("新增")])],1)]),i("el-table",{attrs:{size:"mini","max-height":"760",data:e.dictionDetailTable}},[i("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"name",label:"名称"}}),i("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"codeValue",label:"值"}}),i("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"操作","min-width":"126"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){return e.openDictionarieFormDialog("modification",t.row)}}},[e._v("编辑")]),i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){return e.deleteing(t.row)}}},[e._v("删除")])]}}])})],1)],1)]),i("el-dialog",{attrs:{"close-on-click-modal":!1,"append-to-body":!0,"modal-append-to-body":!1,title:e.dictionarieTitle+"字典数据",visible:e.dictionarieVisible,"before-close":e.closeDictionarieDialog}},[i("el-form",{ref:"dictionarieForm",attrs:{model:e.dictionarieForm,rules:e.dictionarieRules,"label-width":"100px"}},[i("el-form-item",{attrs:{label:"值名称：",prop:"name"}},[i("el-input",{attrs:{clearable:""},nativeOn:{keyup:function(i){return!i.type.indexOf("key")&&e._k(i.keyCode,"enter",13,i.key,"Enter")?null:e.submitDictionarieValue.apply(null,arguments)}},model:{value:e.dictionarieForm.name,callback:function(i){e.$set(e.dictionarieForm,"name",i)},expression:"dictionarieForm.name"}})],1),i("el-form-item",{attrs:{label:"代码：",prop:"codeValue"}},[i("el-input",{nativeOn:{keyup:function(i){return!i.type.indexOf("key")&&e._k(i.keyCode,"enter",13,i.key,"Enter")?null:e.submitDictionarieValue.apply(null,arguments)}},model:{value:e.dictionarieForm.codeValue,callback:function(i){e.$set(e.dictionarieForm,"codeValue",i)},expression:"dictionarieForm.codeValue"}})],1)],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:e.closeDictionarieDialog}},[e._v("关 闭")]),i("el-button",{attrs:{type:"primary"},on:{click:e.submitDictionarieValue}},[e._v(e._s(e.dictionarieTitle))])],1)],1)],1)},a=[],r=t(2175),n={name:"",props:{show:{type:Boolean,default:!1},data:{type:Object,default(){return{}}}},data(){return{queryForm:{codeValue:"",codeType:"",name:"",pageNum:1,pageSize:99999},dictionDetailTable:[],dictionarieTitle:"",dictionarieVisible:!1,dictionarieForm:{id:"",comment:"",name:"",codeValue:""},dictionarieRules:{name:[{required:!0,message:"请输入值名称",trigger:"blur"}],codeValue:[{required:!0,message:"请输入代码",trigger:"blur"}]}}},watch:{data(e,i){this.queryForm.pageNum=1,this.queryForm.codeType=e.codeType,this.getData()}},methods:{getData(){r.Z.dictionarieValues(this.queryForm).then((e=>{0===e.code&&(this.dictionDetailTable=e.rows)}))},openDictionarieFormDialog(e,i){this.dictionarieForm.comment=this.data.comment,this.dictionarieVisible=!0,"add"===e?(this.dictionarieTitle="添加",this.dictionarieForm.codeType=this.data.codeType):(this.dictionarieTitle="修改",this.dictionarieForm.id=i.id,this.dictionarieForm.codeValue=i.codeValue,this.dictionarieForm.name=i.name)},submitDictionarieValue(){const e=this.dictionDetailTable.map((e=>e.codeValue));if("添加"===this.dictionarieTitle&&e.includes(this.dictionarieForm.codeValue))return this.$message.error(`已存在代码 ${this.dictionarieForm.codeValue}`);this.$refs["dictionarieForm"].validate((e=>{e&&("添加"===this.dictionarieTitle?this.insertDictionarieValue():this.modificationDictionarieValue())}))},insertDictionarieValue(){r.Z.addDictionarieValue(this.dictionarieForm).then((e=>{0===e.code&&(this.$message.success("添加成功"),this.$refs["dictionarieForm"].resetFields(),this.getData())}))},modificationDictionarieValue(){r.Z.modificationDictionarieValue({id:this.dictionarieForm.id,name:this.dictionarieForm.name,codeValue:this.dictionarieForm.codeValue}).then((e=>{0===e.code&&(this.$message.success("修改成功"),this.getData(),this.closeDictionarieDialog(),delete this.dictionarieForm.id)}))},deleteing(e){this.$confirm("一旦删除不可恢复，确定删除？","删除提醒",{distinguishCancelAndClose:!0,confirmButtonText:"确定",cancelButtonText:"放弃"}).then((()=>{r.Z.deleteDictionarieValue({ids:[e.id]}).then((e=>{0===e.code&&(this.$message.success(e.msg),this.getData())}))})).catch((e=>{}))},closeDictionarieDialog(){this.$refs["dictionarieForm"].resetFields(),this.dictionarieVisible=!1},handleClose(){this.$emit("before-close",!1)}}},l=n,s=t(1001),c=(0,s.Z)(l,o,a,!1,null,"25312fa1",null),d=c.exports},2175:function(e,i,t){var o=t(7558);i["Z"]={dictionaries:(e,i)=>o.Z.get("/service/demo/dictionaries.json",e,i),addDictionarie:(e,i)=>o.Z.post("/service/demo/addData",e,i),modificationDictionarie:(e,i)=>o.Z.post("/service/demo/editData",e,i),deleteDictionarie:(e,i)=>o.Z.post("/service/demo/removeData",e,i),dictionarieValues:(e,i)=>o.Z.get("/service/demo/dictionarie-values.json",e,i),addDictionarieValue:(e,i)=>o.Z.post("/service/demo/addType",e,i),modificationDictionarieValue:(e,i)=>o.Z.post("/service/demo/editType",e,i),deleteDictionarieValue:(e,i)=>o.Z.post("/service/demo/removeType",e,i)}}}]);