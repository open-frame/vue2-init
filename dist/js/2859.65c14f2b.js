"use strict";(self["webpackChunkiov_platform"]=self["webpackChunkiov_platform"]||[]).push([[2859],{12859:function(e,t,a){a.r(t),a.d(t,{default:function(){return h}});var s=a(63598),r=a(90649),l=a(75267),o=a(67539),i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"recharge"},[t(o.Z,{attrs:{loading:e.loading,btnSpan:8,getData:e.getData,queryReset:e.queryReset}},[t("el-col",{attrs:{span:4}},[t(l.Z,{attrs:{clearable:"",size:"medium",placeholder:"账号"},on:{change:e.pageReset},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getData.apply(null,arguments)}},model:{value:e.queryForm.userId,callback:function(t){e.$set(e.queryForm,"userId",t)},expression:"queryForm.userId"}})],1),t("el-col",{attrs:{span:4}},[t(l.Z,{attrs:{clearable:"",size:"medium",placeholder:"手机号"},on:{change:e.pageReset},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getData.apply(null,arguments)}},model:{value:e.queryForm.phonenumber,callback:function(t){e.$set(e.queryForm,"phonenumber",t)},expression:"queryForm.phonenumber"}})],1),t("el-col",{attrs:{span:4}},[t(l.Z,{attrs:{clearable:"",size:"medium",placeholder:"充值单号"},on:{change:e.pageReset},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getData.apply(null,arguments)}},model:{value:e.queryForm.orderId,callback:function(t){e.$set(e.queryForm,"orderId",t)},expression:"queryForm.orderId"}})],1),t("el-col",{attrs:{span:4}},[t(r.Z,{attrs:{size:"medium",type:"datetimerange",format:"yyyy-MM-dd HH:mm:ss","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"充值时间段","picker-options":e.pickerOptions},on:{change:e.selectPayTime},model:{value:e.payTime,callback:function(t){e.payTime=t},expression:"payTime"}})],1)],1),t("el-divider"),t(s.Z,{ref:"table",attrs:{loading:e.loading,total:e.total,data:e.tableData,height:"550","show-index":!0,"page-size":e.queryForm.pageSize,"current-page":e.queryForm.pageNum,derive:e.exporting},on:{"size-change":e.dataSizeChange,"current-change":e.handleCurrentChange},scopedSlots:e._u([{key:"left",fn:function(){return[t("el-button",{attrs:{size:"small"},on:{click:function(t){e.totalDrawer=!0}}},[e._v("总计")])]},proxy:!0},{key:"columns",fn:function(){return[t("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"userId",label:"账号"}}),t("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"phoneNumber",label:"手机号",width:"120"}}),t("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"orderId",label:"充值单号"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("router-link",{staticClass:"text-black",attrs:{to:{name:"orders-order-manage-index",params:{orderId:a.row.orderId}}}},[e._v(" "+e._s(a.row.orderId)+" ")])]}}])}),t("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"amount",label:"充值金额"}}),t("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"userBalance",label:"账户余额"}}),t("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"payTime",label:"充值时间",width:"180"}})]},proxy:!0}])}),t("el-drawer",{attrs:{modal:!1,"append-to-body":!0,"modal-append-to-body":!1,"with-header":!1,"before-close":e.closeTotalDrawer,visible:e.totalDrawer,"custom-class":"total-drawer"}},[t("h3",{staticStyle:{margin:"30px 0"}},[e._v("数据总览")]),t("div",{staticClass:"list"},[t("span",{staticClass:"title"},[e._v("用户总量：")]),t("span",{staticClass:"number"},[e._v(e._s(e.orderTotals.userIdNum)+"位")])]),t("div",{staticClass:"list"},[t("span",{staticClass:"title"},[e._v("充值总量：")]),t("span",{staticClass:"number"},[e._v(e._s(e.orderTotals.orderNum)+"笔")])]),t("div",{staticClass:"list"},[t("span",{staticClass:"title"},[e._v("充值总额：")]),t("span",{staticClass:"number"},[e._v(e._s(e.orderTotals.amountNum)+"元")])]),t("el-collapse",{staticStyle:{"margin-top":"30px"}},[t("el-collapse-item",{attrs:{title:"充值渠道",name:"1"}},[t("div",{staticClass:"list"},[t("span",{staticClass:"title"},[e._v("微 信：")]),t("span",{staticClass:"number"},[e._v(e._s(e.orderTotals.weixinPay)+"元")])]),t("div",{staticClass:"list"},[t("span",{staticClass:"title"},[e._v("支付宝：")]),t("span",{staticClass:"number"},[e._v(e._s(e.orderTotals.ZFBPay)+"元")])]),t("div",{staticClass:"list"},[t("span",{staticClass:"title"},[e._v("银行卡：")]),t("span",{staticClass:"number"},[e._v(e._s(e.orderTotals.YHKPay)+"元")])])]),t("el-collapse-item",{attrs:{title:"状态统计",name:"2"}},[t("div",{staticClass:"list"},[t("span",{staticClass:"title"},[e._v("成功：")]),t("span",{staticClass:"number"},[e._v(e._s(e.orderTotals.totalElectricNum)+"元")])]),t("div",{staticClass:"list"},[t("span",{staticClass:"title"},[e._v("失败：")]),t("span",{staticClass:"number"},[e._v(e._s(e.orderTotals.totalElectricNum)+"元")])]),t("div",{staticClass:"list"},[t("span",{staticClass:"title"},[e._v("异常：")]),t("span",{staticClass:"number"},[e._v(e._s(e.orderTotals.totalElectricNum)+"元")])])])],1)],1)],1)},n=[],c=a(25335),u=a(30741),p={name:"Recharge",mixins:[u.LI,u.I_,u.oA,u.vd],data(){return{pickerOptions:{disabledDate(e){return e.getTime()>Date.now()}},loading:!1,payTime:"",queryForm:{userName:"",userId:"",phonenumber:"",orderId:"",payMode:"",startTime:"",stopTime:"",pageSize:this.$tableDataSize,pageNum:1,orderByColumn:"payTime",isAsc:"desc"},tableData:[],total:0,totalDrawer:!1,orderTotals:{}}},created(){this.rechargeTotal()},methods:{reset(){this.payTime=[]},selectPayTime(e){e?(this.queryForm.startTime=e[0],this.queryForm.stopTime=e[1]):(this.queryForm.startTime="",this.queryForm.stopTime="")},getData(){this.loading=!0,this.tableData=[],(0,c.sg)(this.queryForm).then((e=>{this.loading=!1,0===e.code&&(this.total=e.total,this.tableData=e.rows)})).catch((()=>{this.loading=!1}))},rechargeTotal(){(0,c.r2)(this.queryForm).then((e=>{0===e.code&&(this.orderTotals=e.data)}))},closeTotalDrawer(){this.totalDrawer=!1},async exporting(e){let t={...this.queryForm};"2"===e&&(t.pageSize=this.total,t.pageNum=1);const a=await(0,c.sg)(t);if(0===a.code){const e=this.$refs.table.getColumns(),t=a.rows.map((t=>{let a=e.map((e=>[e.label,t[e.prop]]));return Object.fromEntries(a)}));return t}}}},d=p,m=a(1001),y=(0,m.Z)(d,i,n,!1,null,"7cd5c658",null),h=y.exports}}]);