"use strict";(self["webpackChunkedo_project"]=self["webpackChunkedo_project"]||[]).push([[7509],{7809:function(e,t,a){a.r(t),a.d(t,{default:function(){return f}});var o=function(){var e=this,t=e._self._c;return t("el-card",{},[t("el-row",{staticClass:"filters",attrs:{gutter:30}},[t("el-col",{staticClass:"text-end",attrs:{span:24}},[t("el-button",{attrs:{size:"medium",type:"primary"},on:{click:e.getData}},[e._v("搜索")]),t("el-button",{attrs:{size:"medium"},on:{click:e.reset}},[e._v("重置")])],1)],1),t("el-divider"),t("edo-table",{ref:"order-table",attrs:{loading:e.loading,total:e.total,data:e.tableData,height:"560","row-key":"orderId","page-size":e.queryForm.pageSize,"current-page":e.queryForm.pageNum},on:{"current-change":e.handleCurrentChange,"size-change":e.dataSizeChange,exporting:e.exporting},scopedSlots:e._u([{key:"columns",fn:function(){return[t("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"processInstanceId",label:"流程id"}}),t("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"processName",label:"流程名称"}}),t("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"startTime",label:"流程开始时间"}}),t("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"taskId",label:"任务id"}}),t("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"taskName",label:"任务名称"}}),t("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"taskCreateTime",label:"任务开始时间"}}),t("el-table-column",{attrs:{label:"操作",width:"90"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{plain:"",type:"primary"},on:{click:function(t){return e.check(a.row)}}},[e._v("审核")])]}}])})]},proxy:!0}])}),t(e.componentName,{ref:e.componentName,tag:"component",attrs:{params:e.componentParams,show:e.formDialog},on:{close:function(t){e.formDialog=!1},success:e.getData}})],1)},r=[],s=a(7195),l=a(6461),n=a(1182),i=a(4116),c=a(4996),m=a(2503),p={name:"",mixins:[c.Z,i.Z,m.Z],data(){return{loading:!1,queryForm:{processDefinitionKey:"",pageSize:this.$tableDataSize,pageNum:1},tableData:[],total:0,taskId:"",componentName:"",formDialog:!1,componentParams:{}}},created(){this.getData()},methods:{getData(){this.loading=!0,this.tableData=[],l.Z.myTask(this.queryForm).then((e=>{this.loading=!1,0===e.code&&(this.total=e.total,this.tableData=e.rows)}))},async check(e){if(e.formKey)try{const t=await a(3421)(`./${e.formKey}.vue`);this.componentName=e.formKey.replace("/","-"),s["default"].component(this.componentName,t.default),this.componentParams=e,this.formDialog=!0}catch(t){this.$message.info(`找不到 ${e.formKey} 资源，404`)}else this.$message.info("没有 formKey")},exporting(e){if(this.tableData.length<1)return this.$message.warning("无数据可导"),!1;const t=this.$loading({lock:!0,text:"正在获取数据...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});let a={...this.queryForm};"2"===e&&(a.pageSize=this.total,a.pageNum=1),l.Z.myTask(a).then((e=>{if(0===e.code){t.text="正在下载...";const a=e.rows.map((e=>({"流程id":e.processInstanceId,"流程名称":e.processName,"任务开始时间":e.taskCreateTime,"任务名称":e.taskName,"流程开始时间":e.startTime,"指定处理人":e.assignee,"任务id":e.taskId})));n.Z.excel(a,"我的待办")}})).finally((()=>{t.close()}))}}},u=p,d=a(1001),h=(0,d.Z)(u,o,r,!1,null,"625a94d2",null),f=h.exports}}]);