"use strict";(self["webpackChunkiov_platform"]=self["webpackChunkiov_platform"]||[]).push([[6537],{26537:function(e,r,t){t.r(r),t.d(r,{default:function(){return u}});var m=function(){var e=this,r=e._self._c;return r("el-dialog",{attrs:{"close-on-click-modal":!1,title:"充值录入","append-to-body":!0,"modal-append-to-body":!1,visible:e.show,"show-close":!1}},[r("el-form",{ref:"ammeter-form",attrs:{model:e.ammeterForm,rules:e.ammeterFormRules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"充值金额",prop:"rechargeAmount"}},[r("el-input-number",{attrs:{precision:2,"controls-position":"right"},model:{value:e.ammeterForm.rechargeAmount,callback:function(r){e.$set(e.ammeterForm,"rechargeAmount",r)},expression:"ammeterForm.rechargeAmount"}})],1),r("el-form-item",{attrs:{label:"电费单价",prop:"unitPrice"}},[r("el-input-number",{attrs:{precision:2,"controls-position":"right"},model:{value:e.ammeterForm.unitPrice,callback:function(r){e.$set(e.ammeterForm,"unitPrice",r)},expression:"ammeterForm.unitPrice"}})],1),r("el-form-item",{attrs:{label:"预充电量",prop:"rechargeElec"}},[r("el-input",{attrs:{readonly:""},model:{value:e.ammeterForm.rechargeElec,callback:function(r){e.$set(e.ammeterForm,"rechargeElec",r)},expression:"ammeterForm.rechargeElec"}},[r("template",{slot:"append"},[e._v("度")])],2)],1),r("el-form-item",{attrs:{label:"单据编号",prop:"billNo"}},[r("el-input",{attrs:{clearable:""},model:{value:e.ammeterForm.billNo,callback:function(r){e.$set(e.ammeterForm,"billNo",r)},expression:"ammeterForm.billNo"}})],1),r("el-form-item",{attrs:{label:"备注",prop:"remarks"}},[r("el-input",{attrs:{clearable:""},model:{value:e.ammeterForm.remarks,callback:function(r){e.$set(e.ammeterForm,"remarks",r)},expression:"ammeterForm.remarks"}})],1)],1),r("span",{attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("提交")]),r("el-button",{on:{click:e.close}},[e._v("取消")])],1)],1)},o=[],a=t(74713),s={name:"",props:{show:{type:Boolean,default:!1},prepaidMeterIds:{type:Array,required:!0}},data(){return this.ammeterFormRules=l,{dropdowns:{typeCategory:[]},ammeterForm:{rechargeAmount:"",billNo:"",unitPrice:"",rechargeElec:"",remarks:"",prepaidMeterIds:[]}}},watch:{"ammeterForm.rechargeAmount"(e){this.ammeterForm.unitPrice&&e&&(this.ammeterForm.rechargeElec=Math.floor(e/this.ammeterForm.unitPrice))},"ammeterForm.unitPrice"(e){this.ammeterForm.rechargeAmount&&e&&(this.ammeterForm.rechargeElec=Math.floor(this.ammeterForm.rechargeAmount/e))}},methods:{submitForm(){this.$refs["ammeter-form"].validate((e=>{if(!e)return!1;this.ammeterForm.prepaidMeterIds=this.prepaidMeterIds,(0,a.b2)(this.ammeterForm).then((e=>{0===e.code&&(this.$message.success(e.msg),this.$emit("success"),this.close())}))}))},close(){this.$refs["ammeter-form"].resetFields(),this.$emit("close",!1)}}};const l={rechargeAmount:[{required:!0,message:"请输入充值金额",trigger:"blur"},{type:"number",min:1,message:"请输入充值金额"}],unitPrice:[{required:!0,message:"请输入电费单价",trigger:"blur"},{type:"number",min:.01,message:"请输入电费单价"}]};var i=s,c=t(1001),n=(0,c.Z)(i,m,o,!1,null,"cc82f1b2",null),u=n.exports}}]);