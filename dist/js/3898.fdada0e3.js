"use strict";(self["webpackChunkiov_platform"]=self["webpackChunkiov_platform"]||[]).push([[3898],{93898:function(e,a,t){t.r(a),t.d(a,{default:function(){return v}});var o=t(66172),r=t(98005),i=function(){var e=this,a=e._self._c;return a("el-dialog",{attrs:{"close-on-click-modal":!1,title:"入库设备","append-to-body":!0,"before-close":e.close,"modal-append-to-body":!1,visible:e.show}},[a("el-button-group",[a("el-button",{attrs:{type:"0"===e.activeName?"primary":""},on:{click:function(a){e.activeName="0"}}},[e._v("入库单信息")]),a("el-button",{attrs:{type:"1"===e.activeName?"primary":""},on:{click:function(a){e.activeName="1"}}},[e._v("设备入库明细")])],1),a("hr"),a("el-form",{directives:[{name:"show",rawName:"v-show",value:"0"===e.activeName,expression:"activeName === '0'"}],ref:"updataDeviceForm",attrs:{model:e.updataDeviceForm,rules:e.detailRules,"label-width":"115px"}},[a("div",[a("el-form-item",{attrs:{label:"入库类型",prop:"ioWhReasonCode"}},[a("el-select",{attrs:{filterable:"","default-first-option":"",clearable:"",placeholder:""},model:{value:e.updataDeviceForm.ioWhReasonCode,callback:function(a){e.$set(e.updataDeviceForm,"ioWhReasonCode",a)},expression:"updataDeviceForm.ioWhReasonCode"}},e._l(e.dropdowns.ioWhReasonCode,(function(e,t){return a("el-option",{key:t,attrs:{label:e.code_name,value:e.code_value}})})),1)],1),a("el-form-item",{attrs:{label:"入库库房",prop:"whNo"}},[a(r.Z,{ref:"warehouse-select",attrs:{placeholder:""},model:{value:e.updataDeviceForm.whNo,callback:function(a){e.$set(e.updataDeviceForm,"whNo",a)},expression:"updataDeviceForm.whNo"}})],1),a("el-form-item",{attrs:{label:"生产厂家",prop:"merchantNo"}},[a(o.Z,{ref:"supplier-select",attrs:{placeholder:""},model:{value:e.updataDeviceForm.merchantNo,callback:function(a){e.$set(e.updataDeviceForm,"merchantNo",a)},expression:"updataDeviceForm.merchantNo"}})],1),a("el-form-item",{attrs:{label:"入库数量",prop:"ioWhNum"}},[a("el-input",{attrs:{clearable:"",disabled:""!==e.updataDeviceForm.ioWhNum},model:{value:e.updataDeviceForm.ioWhNum,callback:function(a){e.$set(e.updataDeviceForm,"ioWhNum",a)},expression:"updataDeviceForm.ioWhNum"}},[a("template",{slot:"append"},[e._v("个")])],2)],1),a("el-form-item",{attrs:{label:"入库时间",prop:"rcvReturnDate"}},[a("el-date-picker",{attrs:{type:"datetime",format:"yyyy-MM-dd HH:mm:ss","value-format":"yyyy-MM-dd HH:mm:ss",disabled:""!==e.updataDeviceForm.rcvReturnDate,"picker-options":e.pickerOptions},model:{value:e.updataDeviceForm.rcvReturnDate,callback:function(a){e.$set(e.updataDeviceForm,"rcvReturnDate",a)},expression:"updataDeviceForm.rcvReturnDate"}})],1)],1),a("el-form-item",{attrs:{label:"设备类型",prop:"typeCode"}},[a("el-select",{attrs:{filterable:"","default-first-option":"",clearable:"",disabled:""!==e.updataDeviceForm.typeCode,placeholder:""},model:{value:e.updataDeviceForm.typeCode,callback:function(a){e.$set(e.updataDeviceForm,"typeCode",a)},expression:"updataDeviceForm.typeCode"}},e._l(e.dropdowns.typeCode,(function(e,t){return a("el-option",{key:t,attrs:{label:e.code_name,value:e.code_value}})})),1)],1),a("el-form-item",{attrs:{label:"设备型号",prop:"typeCode"}},[a("el-select",{attrs:{filterable:"","default-first-option":"",clearable:"",disabled:""!==e.updataDeviceForm.modelCode},model:{value:e.updataDeviceForm.modelCode,callback:function(a){e.$set(e.updataDeviceForm,"modelCode",a)},expression:"updataDeviceForm.modelCode"}},e._l(e.dropdowns.modelCode,(function(e,t){return a("el-option",{key:t,attrs:{label:e.code_name,value:e.code_value}})})),1)],1),a("el-form-item",{attrs:{label:"采购申请编号",prop:"appNo"}},[a("el-input",{attrs:{clearable:""},model:{value:e.updataDeviceForm.appNo,callback:function(a){e.$set(e.updataDeviceForm,"appNo",a)},expression:"updataDeviceForm.appNo"}})],1),a("el-form-item",{attrs:{label:"到货日期",prop:"arriveTime"}},[a("el-date-picker",{attrs:{type:"datetime",format:"yyyy-MM-dd HH:mm:ss","value-format":"yyyy-MM-dd HH:mm:ss","picker-options":e.pickerOptions},model:{value:e.updataDeviceForm.arriveTime,callback:function(a){e.$set(e.updataDeviceForm,"arriveTime",a)},expression:"updataDeviceForm.arriveTime"}})],1),a("el-form-item",{attrs:{label:"物流单号",prop:"relaId"}},[a("el-input",{attrs:{clearable:""},model:{value:e.updataDeviceForm.relaId,callback:function(a){e.$set(e.updataDeviceForm,"relaId",a)},expression:"updataDeviceForm.relaId"}})],1),a("el-form-item",{attrs:{label:"检测人员",prop:"examName"}},[a("el-input",{attrs:{clearable:""},model:{value:e.updataDeviceForm.examName,callback:function(a){e.$set(e.updataDeviceForm,"examName",a)},expression:"updataDeviceForm.examName"}})],1),a("el-form-item",{attrs:{label:"检测时间",prop:"examTime"}},[a("el-date-picker",{attrs:{type:"datetime",format:"yyyy-MM-dd HH:mm:ss","value-format":"yyyy-MM-dd HH:mm:ss","picker-options":e.pickerOptions},model:{value:e.updataDeviceForm.examTime,callback:function(a){e.$set(e.updataDeviceForm,"examTime",a)},expression:"updataDeviceForm.examTime"}})],1),a("el-form-item",{attrs:{label:"抽检数量",prop:"examNumber"}},[a("el-input-number",{attrs:{precision:0,"controls-position":"right"},model:{value:e.updataDeviceForm.examNumber,callback:function(a){e.$set(e.updataDeviceForm,"examNumber",a)},expression:"updataDeviceForm.examNumber"}})],1),a("el-form-item",{attrs:{label:"检测结论",prop:"examResult"}},[a("el-input",{attrs:{clearable:"",type:"textarea"},model:{value:e.updataDeviceForm.examResult,callback:function(a){e.$set(e.updataDeviceForm,"examResult",a)},expression:"updataDeviceForm.examResult"}})],1)],1),a("insert-detail",{attrs:{show:"1"===e.activeName,ioWhId:e.data.ioWhId}}),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("入库")]),a("el-button",{on:{click:e.close}},[e._v("关闭")])],1)],1)},l=[],m=t(74713),s=t(5376),d={name:"",components:{"insert-detail":()=>Promise.all([t.e(9674),t.e(7815),t.e(4945),t.e(3699),t.e(5508),t.e(4461),t.e(5588),t.e(4291),t.e(741),t.e(8571),t.e(2410)]).then(t.bind(t,28571))},props:{show:{type:Boolean,default:!1},data:{type:Object,default(){return{}}}},watch:{show(e){e?(this.getDropdowns(),this.addFormValidator()):this.activeName="0"},data(e){e&&this.$nextTick((()=>{for(let a in this.updataDeviceForm)this.updataDeviceForm[a]=e[a]}))}},data(){return this.detailRules=p,{pickerOptions:{disabledDate(e){return e.getTime()>Date.now()-864e5}},activeName:"0",dropdowns:{typeCode:[],ioWhReasonCode:[],modelCode:[]},updataDeviceForm:{file:"",typeCode:"",ioWhId:"",ioWhReasonCode:"",appNo:"",whNo:"",modelCode:"",merchantNo:"",arriveTime:"",ioWhNum:"",examName:"",relaId:"",examTime:"",rcvReturnDate:"",examNumber:"",examResult:""},deviceTableData:[]}},methods:{getDropdowns(){(0,s.Wl)("3004").then((e=>{0===e.code&&(this.dropdowns.typeCode=e.data)})),(0,s.Wl)("45256").then((e=>{0===e.code&&(this.dropdowns.ioWhReasonCode=e.data)})),(0,s.Wl)("3005").then((e=>{0===e.code&&(this.dropdowns.modelCode=e.data)}))},addFormValidator(){const e=this;this.$nextTick((()=>{e.detailRules.examNumber=[{required:!0,message:"请输入抽检数量",trigger:"blur"},{type:"number",min:0,max:9999999999,message:"请输入正确的抽检数量"},{validator:(a,t,o)=>{t?e.updataDeviceForm.ioWhNum<t?o(new Error("抽检数量不能大于入库数量")):o():o(new Error("抽检数量不能 <=0"))},trigger:"blur"}]}))},submit(){const e=this;e.$refs["updataDeviceForm"].validate((a=>{a&&(0,m.j0)(e.updataDeviceForm).then((a=>{0===a.code&&(e.$emit("success",{}),e.$message.success(a.msg),e.close())}))}))},close(){this.$emit("close",!1),this.$refs["updataDeviceForm"].resetFields()}}};const p={ioWhReasonCode:[{required:!0,message:"请选择入库类型",trigger:"blur"}],merchantNo:[{required:!0,message:"请选择设备的供应商",trigger:"blur"}],whNo:[{required:!0,message:"请选择库房",trigger:"blur"}],appNo:[{pattern:/^[^<|>|(|)|+|-|*|/|%|=|{|}]*$/,message:"禁止< > ( ) + - * / % = { }等特殊字符",trigger:"blur"},{min:3,max:48,message:"长度在 3 到 48 个字符",trigger:"blur"}],relaId:[{pattern:/^[^<|>|(|)|+|-|*|/|%|=|{|}]*$/,message:"禁止< > ( ) + - * / % = { }等特殊字符",trigger:"blur"},{min:3,max:48,message:"长度在 3 到 48 个字符",trigger:"blur"}],examNumber:[],examResult:[{pattern:/^[^<|>|(|)|+|-|*|/|%|=|{|}]*$/,message:"禁止< > ( ) + - * / % = { }等特殊字符",trigger:"blur"},{min:3,max:48,message:"长度在 3 到 48 个字符",trigger:"blur"}]};var c=d,u=t(1001),n=(0,u.Z)(c,i,l,!1,null,"9d96a3a8",null),v=n.exports}}]);