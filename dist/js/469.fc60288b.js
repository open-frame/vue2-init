"use strict";(self["webpackChunkiov_platform"]=self["webpackChunkiov_platform"]||[]).push([[469],{70469:function(e,t,o){o.r(t),o.d(t,{default:function(){return w}});var a=o(63598),r=o(71377),n=o(66654),s=o(75267),l=o(67539),i=function(){var e=this,t=e._self._c;return t("el-card",{staticClass:"use-electric"},[t(l.Z,{attrs:{loading:e.loading,btnSpan:24,getData:e.getData,queryReset:e.queryReset}},[t("el-col",{attrs:{span:4}},[t(s.Z,{attrs:{clearable:"",size:"medium",placeholder:"账号"},on:{change:e.pageReset},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getData.apply(null,arguments)}},model:{value:e.queryForm.loginName,callback:function(t){e.$set(e.queryForm,"loginName",t)},expression:"queryForm.loginName"}})],1),t("el-col",{attrs:{span:4}},[t(s.Z,{attrs:{clearable:"",size:"medium",placeholder:"姓名"},on:{change:e.pageReset},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getData.apply(null,arguments)}},model:{value:e.queryForm.chineseName,callback:function(t){e.$set(e.queryForm,"chineseName",t)},expression:"queryForm.chineseName"}})],1),t("el-col",{attrs:{span:4}},[t(s.Z,{attrs:{clearable:"",size:"medium",placeholder:"手机号"},on:{change:e.pageReset},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getData.apply(null,arguments)}},model:{value:e.queryForm.phonenumber,callback:function(t){e.$set(e.queryForm,"phonenumber",t)},expression:"queryForm.phonenumber"}})],1),t("el-col",{attrs:{span:4}},[t(s.Z,{attrs:{clearable:"",size:"medium",placeholder:"VIN"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getData.apply(null,arguments)}},model:{value:e.queryForm.vinCode,callback:function(t){e.$set(e.queryForm,"vinCode",t)},expression:"queryForm.vinCode"}})],1),t("el-col",{attrs:{span:4}},[t(n.Z,{attrs:{animatLable:""},model:{value:e.queryForm.constructionUuid,callback:function(t){e.$set(e.queryForm,"constructionUuid",t)},expression:"queryForm.constructionUuid"}})],1),t("el-col",{attrs:{span:4}},[t(r["default"],{attrs:{filterable:"","default-first-option":"",clearable:"",size:"medium",placeholder:"用户状态"},model:{value:e.queryForm.runStatus,callback:function(t){e.$set(e.queryForm,"runStatus",t)},expression:"queryForm.runStatus"}},e._l(e.dropdowns.runStatus,(function(e,o){return t("el-option",{key:o,attrs:{label:e.code_name,value:e.code_value}})})),1)],1)],1),t("el-divider"),t(a.Z,{ref:"table",attrs:{loading:e.loading,total:e.total,data:e.tableData,height:"550","row-key":"userId","page-size":e.queryForm.pageSize,"current-page":e.queryForm.pageNum,derive:e.exporting},on:{"size-change":e.dataSizeChange,"current-change":e.handleCurrentChange},scopedSlots:e._u([{key:"columns",fn:function(){return[t("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"runStatus",label:"用户状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e._f("transfortext")(t.row.runStatus,e.dropdowns.runStatus))+" ")]}}])}),t("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"用户编号",prop:"userId"}}),t("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"用户账号",prop:"loginName"}}),t("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"手机号",prop:"phonenumber"}}),t("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"VIN",prop:"vinCode"}}),t("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"余额",prop:"balance"}}),t("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"积分",prop:"integral"}}),t("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"加入时间",prop:"operationTime"}}),t("el-table-column",{attrs:{label:"操作",width:"250"},scopedSlots:e._u([{key:"default",fn:function(o){return[t("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.detail(o.row)}}},[e._v("查看")]),t("el-dropdown",{staticClass:"ms-2",attrs:{trigger:"click"},on:{command:e.userHistory}},[t("el-button",{attrs:{size:"mini"}},[e._v(" 记录"),t("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[t("el-dropdown-item",{attrs:{command:{name:"orders-order-manage-index",params:{userId:o.row.loginName}}}},[e._v("订单记录")]),t("el-dropdown-item",{attrs:{command:{name:"settlement-user-account-refund",params:{userId:o.row.loginName,panel:"0"}}}},[e._v("退款记录")]),t("el-dropdown-item",{attrs:{command:{name:"settlement-user-account-withdraw",params:{userId:o.row.loginName,panel:"1"}}}},[e._v("提现记录")]),t("el-dropdown-item",{attrs:{command:{path:"/settlement/user-account/account-history",query:{panel:"0",userId:o.row.loginName}}}},[e._v("充值记录")])],1)],1),t("el-dropdown",{staticClass:"ms-2",attrs:{trigger:"click"},on:{command:function(t){return e.moreHandel(t,o.row)}}},[t("el-button",{attrs:{size:"mini"}},[e._v(" 更多"),t("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[t("el-dropdown-item",{attrs:{command:"1"}},[e._v(" "+e._s("1"===o.row.runStatus?"冻结":"解冻")+" ")]),t("el-dropdown-item",{attrs:{command:"2"}},[e._v("送券")]),o.row.balance>.01?t("el-dropdown-item",{attrs:{command:"3",divided:""}},[e._v("申请提现")]):e._e()],1)],1)]}}])})]},proxy:!0}])}),t("user-detail",{attrs:{show:e.dialogVisible,data:e.userDetail},on:{close:e.closeSeeDetail}}),t("refund-dialog",{attrs:{show:e.refundVisible,data:e.refundForm},on:{close:e.closeRefundDialog,success:e.getData}}),t("give-ticket",{attrs:{show:e.freeAdmissionDialog,data:e.freeAdmissionForm},on:{close:e.closegiveTicketDialog,success:e.getData}})],1)},u=[],d=(o(57658),o(24779)),c=o(5376),m=o(90886),p=o(30741),h={name:"management-use-electric-index",mixins:[p.LI,p.I_,p.oA,p.vd],filters:{transfortext:m.h},components:{"user-detail":()=>o.e(7245).then(o.bind(o,67245)),"refund-dialog":()=>o.e(6095).then(o.bind(o,76095)),"give-ticket":()=>o.e(7885).then(o.bind(o,10175))},data(){return{loading:!1,queryForm:{loginName:"",userName:"",chineseName:"",phonenumber:"",runStatus:"",constructionUuid:"",vinCode:"",pageSize:this.$tableDataSize,pageNum:1,orderByColumn:"",isAsc:"desc"},dropdowns:{runStatus:[],reason:[]},tableData:[],total:0,dialogVisible:!1,userDetail:{},refundVisible:!1,refundForm:{},freeAdmissionDialog:!1,freeAdmissionForm:{}}},created(){this.getDropdowns()},methods:{getDropdowns(){(0,c.Wl)("3018").then((e=>{0===e.code&&(this.dropdowns.runStatus=e.data)})),(0,c.Wl)("999997").then((e=>{0===e.code&&(this.dropdowns.reason=e.data)}))},detail(e){this.dialogVisible=!0,this.userDetail=e},changeStatus(e){let t;t="2"===e.runStatus?1:2,(0,d.Tu)({userId:e.userId,runStatus:t}).then((e=>{0===e.code&&(this.getData(),this.$message.success(e.msg))}))},closeSeeDetail(e){this.dialogVisible=!1,this.userDetail={}},getData(){this.tableData=[],this.loading=!0,(0,d._c)(this.queryForm).then((e=>{this.loading=!1,0===e.code&&(this.total=e.total,this.tableData=e.rows)})).catch((()=>{this.loading=!1}))},userHistory(e){this.$router.push(e)},moreHandel(e,t){switch(e){case"1":this.changeStatus(t);break;case"2":this.freeAdmissionDialog=!0,this.freeAdmissionForm={userId:t.loginName};break;case"3":this.refundVisible=!0,this.refundForm={userId:t.loginName,backMoney:t.balance};break}},closeRefundDialog(){this.refundVisible=!1,this.refundForm={}},closegiveTicketDialog(){this.freeAdmissionDialog=!1,this.freeAdmissionForm={}},async exporting(e){let t={...this.queryForm};"2"===e&&(t.pageSize=this.total,t.pageNum=1);const o=await(0,d._c)(t);if(0===o.code){const e=this.$refs.table.getColumns(),t=o.rows.map((t=>{let o=e.map((e=>[e.label,`${(0,m.h)(t[e.prop],this.dropdowns[e.prop])}`]));return Object.fromEntries(o)}));return t}}}},g=h,f=o(1001),b=(0,f.Z)(g,i,u,!1,null,"b1a62b12",null),w=b.exports}}]);