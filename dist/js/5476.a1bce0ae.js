"use strict";(self["webpackChunkiov_platform"]=self["webpackChunkiov_platform"]||[]).push([[5476],{45476:function(e,t,o){o.r(t),o.d(t,{default:function(){return k}});var a=o(63598),r=o(71377),l=o(90649),n=o(66172),s=o(75267),i=o(67539),u=function(){var e=this,t=e._self._c;return t("el-card",[t(i.Z,{attrs:{loading:e.tableLoading,btnSpan:8,getData:e.getData,queryReset:e.queryReset}},[t("el-col",{attrs:{span:4}},[t(s.Z,{attrs:{clearable:"",size:"medium",placeholder:"返厂编号"},on:{change:e.pageReset},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getData.apply(null,arguments)}},model:{value:e.queryForm.ioWhId,callback:function(t){e.$set(e.queryForm,"ioWhId",t)},expression:"queryForm.ioWhId"}})],1),t("el-col",{attrs:{span:4}},[t(n.Z,{attrs:{animatLable:"",size:"medium"},model:{value:e.queryForm.merchantNo,callback:function(t){e.$set(e.queryForm,"merchantNo",t)},expression:"queryForm.merchantNo"}})],1),t("el-col",{attrs:{span:4}},[t(l.Z,{attrs:{size:"medium",type:"datetimerange",placeholder:"返厂时间段",format:"yyyy-MM-dd HH:mm:ss","value-format":"yyyy-MM-dd HH:mm:ss","picker-options":e.pickerOptions},on:{change:e.pageReset},model:{value:e.queryForm.timeQuantum,callback:function(t){e.$set(e.queryForm,"timeQuantum",t)},expression:"queryForm.timeQuantum"}})],1),t("el-col",{attrs:{span:4}},[t(r["default"],{attrs:{filterable:"","default-first-option":"",clearable:"",size:"medium",placeholder:"设备类型"},on:{change:e.pageReset},model:{value:e.queryForm.typeCode,callback:function(t){e.$set(e.queryForm,"typeCode",t)},expression:"queryForm.typeCode"}},e._l(e.dropdowns.typeCode,(function(e,o){return t("el-option",{key:o,attrs:{label:e.code_name,value:e.code_value}})})),1)],1)],1),t("el-divider"),t(a.Z,{ref:"table",attrs:{loading:e.tableLoading,total:e.total,data:e.tableData,height:"550","row-key":"ioWhId","page-size":e.queryForm.pageSize,"current-page":e.queryForm.pageNum},on:{"size-change":e.dataSizeChange,"current-change":e.handleCurrentChange},scopedSlots:e._u([{key:"left",fn:function(){return[t("el-button",{attrs:{size:"small"},on:{click:function(t){return e.openBackDetail("1")}}},[e._v("返厂")])]},proxy:!0},{key:"columns",fn:function(){return[t("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"ioWhId",label:"返厂编号"}}),t("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"rcvReturnDate",label:"返厂时间"}}),t("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"ioWhReason",label:"返厂说明"}}),t("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"typeCode",label:"设备类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e._f("transfortext")(t.row.typeCode,e.dropdowns.typeCode))+" ")]}}])}),t("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"ioWhNum",label:"返厂数量"}}),t("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"fetchEmpName",label:"操作人"}}),t("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"merchantNo",label:"生产厂家"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e._f("transfortext")(t.row.merchantNo,e.dropdowns.merchantNo,{name:"merchantName",value:"merchantNo"}))+" ")]}}])}),t("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"whNo",label:"所属库房"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e._f("transfortext")(t.row.whNo,e.dropdowns.whNo,{name:"name",value:"whNo"}))+" ")]}}])}),t("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"rcvReturnDept",label:"所属部门"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e._f("transfortext")(t.row.rcvReturnDept,e.dropdowns.rcvReturnDept,{name:"label",value:"deptCode"}))+" ")]}}])}),t("el-table-column",{attrs:{label:"操作",width:"140",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(o){return[t("el-button",{attrs:{plain:"",type:"primary",size:"mini"},on:{click:function(t){return e.openBackDetail("0",o.row)}}},[e._v(" 明细 ")])]}}])})]},proxy:!0}])}),t("back-detail",{attrs:{show:e.backDetailVisable,type:e.backDetailType,data:e.backDetailData},on:{success:e.getData,close:e.closeBackDetail}})],1)},c=[],p=o(74713),d=o(5376),m=o(90886),h=o(30741),b={name:"property-inventory-back-index",mixins:[h.LI,h.I_,h.oA,h.vd],components:{"back-detail":()=>Promise.all([o.e(8005),o.e(9685),o.e(4917),o.e(7346)]).then(o.bind(o,34917))},filters:{transfortext:m.h},data(){return{pickerOptions:{disabledDate(e){return e.getTime()>Date.now()}},tableLoading:!1,dropdowns:{typeCode:[],merchantNo:[],whNo:[],rcvReturnDept:[]},queryForm:{timeQuantum:[],startTime:"",endTime:"",merchantNo:"",typeCode:"",modelCode:"",pageSize:this.$tableDataSize,pageNum:1},tableData:[],total:0,backDetailVisable:!1,backDetailType:"",backDetailData:{}}},created(){this.getDropdowns()},watch:{"queryForm.timeQuantum"(e,t){e?(this.queryForm.startTime=e[0],this.queryForm.endTime=e[1]):(this.queryForm.startTime="",this.queryForm.endTime="")}},methods:{getDropdowns(){(0,d.Wl)("3004").then((e=>{0===e.code&&(this.dropdowns.typeCode=e.data)})),(0,p.aM)({}).then((e=>{0===e.code&&(this.dropdowns.whNo=e.rows)})),(0,p.rH)({}).then((e=>{0===e.code&&(this.dropdowns.merchantNo=e.rows)})),(0,d.eL)().then((e=>{this.dropdowns.rcvReturnDept=e}))},getData(){this.tableLoading=!0,this.tableData=[],(0,p.OC)(this.queryForm).then((e=>{this.tableLoading=!1,0===e.code&&(this.tableData=e.rows,this.total=e.total)})).catch((()=>{this.tableLoading=!1}))},openBackDetail(e,t){this.backDetailType=e,this.backDetailVisable=!0,this.backDetailData=t},closeBackDetail(e){this.backDetailVisable=e,this.backDetailType=""},async exporting(e){let t={...this.queryForm};"2"===e&&(t.pageSize=this.total,t.pageNum=1);const o=await(0,p.OC)(t);if(0===o.code){const e=this.$refs.table.getColumns(),t=o.rows.map((t=>{let o=e.map((e=>[e.label,`${(0,m.h)(t[e.prop],this.dropdowns[e.prop])}`]));return Object.fromEntries(o)}));return t}}}},f=b,y=o(1001),w=(0,y.Z)(f,u,c,!1,null,"edf45630",null),k=w.exports}}]);