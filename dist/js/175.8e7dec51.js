"use strict";(self["webpackChunkiov_platform"]=self["webpackChunkiov_platform"]||[]).push([[175,5376,2453,1226,7885,2335],{5376:function(e,t,s){s.d(t,{Jz:function(){return l},Wl:function(){return o},eL:function(){return n},hv:function(){return a},iS:function(){return m},oP:function(){return i}});s(57658);var r=s(92617);function o(e,t){return r.o.post("/select/box/selectBoxPoint",{codeType:e},t)}function i(e,t){return r.o.post("/system/dept/treeData",e,t)}async function n(e,t){const s=await r.o.post("/system/dept/treeData",e,t);let o=[];return 0===s.code&&function e(t){t.map((t=>{t.children&&e(t.children),o.push(t)}))}(s.data),o}function l(e,t){return r.o.post("/flow/monitor/getAssigneeList",e,t)}function m(){return r.o.get("/assetStake/getStationListByLoginUser")}function a(){return r.o.get("/system/user/add")}},10175:function(e,t,s){s.r(t),s.d(t,{default:function(){return c}});var r=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{"close-on-click-modal":!1,"append-to-body":!0,"modal-append-to-body":!1,title:"送券",visible:e.show,"show-close":!1}},[t("el-form",{ref:"give-ticket-form",attrs:{model:e.freeAdmissionForm,rules:e.freeAdmissionRules,"label-width":"130px"}},[t("el-form-item",{attrs:{label:"赠送数量：",prop:"cardNum"}},[t("el-input-number",{attrs:{precision:0,"controls-position":"right"},model:{value:e.freeAdmissionForm.cardNum,callback:function(t){e.$set(e.freeAdmissionForm,"cardNum",t)},expression:"freeAdmissionForm.cardNum"}})],1),t("el-form-item",{attrs:{label:"赠送金额：",prop:"sendMoney"}},[t("el-input",{attrs:{type:"number",clearable:""},model:{value:e.freeAdmissionForm.sendMoney,callback:function(t){e.$set(e.freeAdmissionForm,"sendMoney",t)},expression:"freeAdmissionForm.sendMoney"}})],1),t("el-form-item",{attrs:{label:"失效时间：",prop:"useTime"}},[t("el-date-picker",{attrs:{size:"medium",type:"datetime",clearable:"",format:"yyyy-MM-dd HH:mm:ss","value-format":"yyyy-MM-dd HH:mm:ss","picker-options":e.pickerOptions},model:{value:e.freeAdmissionForm.useTime,callback:function(t){e.$set(e.freeAdmissionForm,"useTime",t)},expression:"freeAdmissionForm.useTime"}})],1),t("el-form-item",{attrs:{label:"券限额类别：",prop:"limitType"}},[t("el-select",{attrs:{filterable:"","default-first-option":"",clearable:"",size:"medium",placeholder:""},model:{value:e.freeAdmissionForm.limitType,callback:function(t){e.$set(e.freeAdmissionForm,"limitType",t)},expression:"freeAdmissionForm.limitType"}},e._l(e.dropdowns.limitType,(function(e,s){return t("el-option",{key:s,attrs:{label:e.code_name,value:e.code_value}})})),1)],1)],1),t("span",{attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.close}},[e._v("关 闭")]),t("el-button",{attrs:{type:"primary"},on:{click:e.freeAdmission}},[e._v("赠 送")])],1)],1)},o=[],i=s(24779),n=s(5376),l={name:"",props:{show:{type:Boolean,default:!1},data:{type:Object,required:!0}},data(){return{pickerOptions:{disabledDate(e){return e.getTime()<Date.now()-864e5}},dropdowns:{limitType:[]},freeAdmissionRules:m,freeAdmissionForm:{userId:"",cardNum:"",sendMoney:"",useTime:"",limitType:""}}},watch:{data(e){e.userId&&(this.getDropdowns(),this.freeAdmissionForm.userId=e.userId)}},methods:{getDropdowns(){(0,n.Wl)("3047").then((e=>{0===e.code&&(this.dropdowns.limitType=e.data)}))},freeAdmission(){this.$refs["give-ticket-form"].validate((e=>{e&&(0,i.Mw)(this.freeAdmissionForm).then((e=>{0===e.code&&(this.$message.success("赠送成功"),this.close(),this.$emit("success"))}))}))},close(){this.$refs["give-ticket-form"].resetFields(),this.$emit("close",!1)}}};const m={limitType:[{required:!0,message:"请选择限额类别",trigger:"change"}],sendMoney:[{required:!0,message:"请输入赠送金额",trigger:"blur"}],cardNum:[{required:!0,message:"请输入赠送数量",trigger:"blur"},{type:"number",min:1,max:9999999,message:"赠送数量错误",trigger:"blur"}],useTime:[{required:!0,message:"请选择券的失效时间",trigger:"change"}]};var a=l,d=s(1001),u=(0,d.Z)(a,r,o,!1,null,"4cd202da",null),c=u.exports}}]);