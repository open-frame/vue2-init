"use strict";(self["webpackChunkiov_platform"]=self["webpackChunkiov_platform"]||[]).push([[3736],{53736:function(e,t,o){o.r(t),o.d(t,{default:function(){return k}});var a=o(63598),l=o(75267),r=o(66172),n=o(12025),s=o(71377),i=o(67539),u=function(){var e=this,t=e._self._c;return t("el-card",{},[t(i.Z,{attrs:{loading:e.tableLoading,btnSpan:12,getData:e.getData,queryReset:e.queryReset}},[t("el-col",{attrs:{span:4}},[t(l.Z,{attrs:{clearable:"",size:"medium",placeholder:"设备编号"},on:{change:e.pageReset},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getData.apply(null,arguments)}},model:{value:e.queryForm.stakeNo,callback:function(t){e.$set(e.queryForm,"stakeNo",t)},expression:"queryForm.stakeNo"}})],1),t("el-col",{attrs:{span:4}},[t(l.Z,{attrs:{clearable:"",size:"medium",placeholder:"设备名称"},on:{change:e.pageReset},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getData.apply(null,arguments)}},model:{value:e.queryForm.stakeName,callback:function(t){e.$set(e.queryForm,"stakeName",t)},expression:"queryForm.stakeName"}})],1),t("el-col",{attrs:{span:4}},[t(s["default"],{attrs:{filterable:"","default-first-option":"",clearable:"",size:"medium",placeholder:"设备类型"},on:{change:e.pageReset},model:{value:e.queryForm.type,callback:function(t){e.$set(e.queryForm,"type",t)},expression:"queryForm.type"}},e._l(e.dropdowns.type,(function(e,o){return t("el-option",{key:o,attrs:{label:e.code_name,value:e.code_value}})})),1)],1),t("el-col",{attrs:{span:4}},[t(s["default"],{attrs:{filterable:"","default-first-option":"",clearable:"",size:"medium",placeholder:"设备型号"},on:{change:e.pageReset},model:{value:e.queryForm.equipModelUuid,callback:function(t){e.$set(e.queryForm,"equipModelUuid",t)},expression:"queryForm.equipModelUuid"}},e._l(e.dropdowns.equipModelUuid,(function(e,o){return t("el-option",{key:o,attrs:{label:e.code_name,value:e.code_value}})})),1)],1),t("el-col",{attrs:{span:4}},[t(s["default"],{attrs:{filterable:"","default-first-option":"",clearable:"",size:"medium",placeholder:"设备状态"},on:{change:e.pageReset},model:{value:e.queryForm.curStatusCode,callback:function(t){e.$set(e.queryForm,"curStatusCode",t)},expression:"queryForm.curStatusCode"}},e._l(e.dropdowns.curStatusCode,(function(e,o){return t("el-option",{key:o,attrs:{label:e.code_name,value:e.code_value}})})),1)],1),t("el-col",{attrs:{span:4}},[t(n.Z,{attrs:{animatLable:""},on:{change:e.pageReset},model:{value:e.queryForm.stationUuid,callback:function(t){e.$set(e.queryForm,"stationUuid",t)},expression:"queryForm.stationUuid"}})],1),t("el-col",{attrs:{span:4}},[t(r.Z,{ref:"supplier-select",attrs:{animatLable:""},on:{change:e.pageReset},model:{value:e.queryForm.merchantNo,callback:function(t){e.$set(e.queryForm,"merchantNo",t)},expression:"queryForm.merchantNo"}})],1),t("el-col",{attrs:{span:4}},[t(l.Z,{attrs:{clearable:"",size:"medium",placeholder:"采购编号"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getData.apply(null,arguments)}},model:{value:e.queryForm.appNo,callback:function(t){e.$set(e.queryForm,"appNo",t)},expression:"queryForm.appNo"}})],1),t("el-col",{attrs:{span:4}},[t(l.Z,{attrs:{clearable:"",size:"medium",placeholder:"批次编号"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getData.apply(null,arguments)}},model:{value:e.queryForm.batch,callback:function(t){e.$set(e.queryForm,"batch",t)},expression:"queryForm.batch"}})],1)],1),t("el-divider"),t(a.Z,{ref:"table",attrs:{loading:e.tableLoading,total:e.total,data:e.tableData,height:"500","row-key":"device_name","page-size":e.queryForm.pageSize,"current-page":e.queryForm.pageNum,derive:e.exporting},on:{"size-change":e.dataSizeChange,"current-change":e.handleCurrentChange},scopedSlots:e._u([{key:"columns",fn:function(){return[t("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"所属站",prop:"stationUuid"}}),t("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"设备编号",prop:"stakeNo"}}),t("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"设备名称",prop:"stakeName"}}),t("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"设备类型",prop:"type"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e._f("transfortext")(t.row.type,e.dropdowns.type))+" ")]}}])}),t("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"设备型号",prop:"equipModelUuid"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e._f("transfortext")(t.row.equipModelUuid,e.dropdowns.equipModelUuid))+" ")]}}])}),t("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"生产厂家",prop:"merchantNo"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e._f("transfortext")(t.row.merchantNo,e.dropdowns.merchantNo,{name:"merchantName",value:"merchantNo"}))+" ")]}}])}),t("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"采购申请编号",prop:"appNo"}}),t("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"入库时间",prop:"rcvReturnDate"}}),t("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"入库单号",prop:"ioWhId"}}),t("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"库房",prop:"whNo"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e._f("transfortext")(t.row.whNo,e.dropdowns.whNo,{name:"name",value:"whNo"}))+" ")]}}])}),t("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"设备状态",prop:"curStatusCode"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e._f("transfortext")(t.row.curStatusCode,e.dropdowns.curStatusCode))+" ")]}}])}),t("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"二维码",width:"70"},scopedSlots:e._u([{key:"default",fn:function(o){return[t("el-button",{staticClass:"text-warmgray",attrs:{title:"查看二维码",icon:"i-fa:qrcode",type:"text"},on:{click:function(t){return e.seeQRcode(o.row)}}})]}}])}),t("el-table-column",{attrs:{label:"操作",width:"180",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(o){return[t("el-button",{attrs:{plain:"",type:"primary",size:"mini"},on:{click:function(t){return e.editing(o.row)}}},[e._v(" 详情 ")]),t("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.lifeCycle(o.row)}}},[e._v(" 生命周期 ")])]}}])})]},proxy:!0}])}),t("el-dialog",{attrs:{"close-on-click-modal":!1,title:"资产详情","append-to-body":!0,"modal-append-to-body":!1,visible:e.propertyDataVisible,"before-close":e.closePropertyDataVisible}},[["1","2","3"].includes(e.detailParams.type)?t("category1-2-3-detail",{attrs:{show:e.propertyDataVisible,params:e.detailParams}}):["4","5"].includes(e.detailParams.type)?t("category4-5-detail",{attrs:{show:e.propertyDataVisible,params:e.detailParams}}):e._e()],1),t("life-cycle",{attrs:{stakeNo:e.detailParams.stakeNo,show:e.lifeCycleVisible},on:{close:e.closeLifeCycleVisible}})],1)},p=[],c=o(74713),d=o(5376),m=o(90886),y=o(30741),f={name:"property-query-index",mixins:[y.LI,y.I_,y.oA,y.vd],components:{"category1-2-3-detail":()=>o.e(5564).then(o.bind(o,85564)),"category4-5-detail":()=>Promise.all([o.e(9323),o.e(5679)]).then(o.bind(o,9323)),"life-cycle":()=>o.e(6362).then(o.bind(o,96362))},filters:{transfortext:m.h},data(){return{tableLoading:!1,dropdowns:{type:[],equipModelUuid:[],curStatusCode:[],allPowerStation:[],ports:[],merchantNo:[],whNo:[],installationAddress:[]},queryForm:{batch:"",appNo:"",stationUuid:"",curStatusCode:"",equipModelUuid:"",type:"",stakeNo:"",stakeName:"",merchantNo:"",pageSize:this.$tableDataSize,pageNum:1},tableData:[],total:0,propertyDataVisible:!1,detailParams:{stakeNo:"",type:""},lifeCycleVisible:!1}},created(){this.getDropdowns()},methods:{getDropdowns(){(0,d.Wl)("3004").then((e=>{0===e.code&&(this.dropdowns.type=e.data)})),(0,d.Wl)("3005").then((e=>{0===e.code&&(this.dropdowns.equipModelUuid=e.data)})),(0,d.Wl)("45259").then((e=>{0===e.code&&(this.dropdowns.curStatusCode=e.data)})),(0,d.Wl)("3010").then((e=>{0===e.code&&(this.dropdowns.ports=e.data)})),(0,c.aM)({}).then((e=>{0===e.code&&(this.dropdowns.whNo=e.rows)})),(0,c.rH)({}).then((e=>{0===e.code&&(this.dropdowns.merchantNo=e.rows)})),(0,c.NK)({s:""}).then((e=>{0===e.code&&(this.dropdowns.allPowerStation=e.data)}))},getData(){this.tableLoading=!0,this.tableData=[],(0,c.lP)(this.queryForm).then((e=>{this.tableLoading=!1,0===e.code&&(this.tableData=e.rows,this.total=e.total)})).catch((()=>{this.tableLoading=!1}))},editing(e){this.propertyDataVisible=!0,this.detailParams={stakeNo:e.stakeNo,type:e.type}},closePropertyDataVisible(){this.propertyDataVisible=!1},lifeCycle(e){this.lifeCycleVisible=!0,this.detailParams={stakeNo:e.stakeNo,type:e.type}},closeLifeCycleVisible(){this.lifeCycleVisible=!1},seeQRcode(e){const t="https://api.qrtool.cn/",o=`?text=https://www.edo-iot.com/escar/weixincode/program?scene=${e.stakeNo}`;window.open(t+o,"_blank","location=no, status=no, menubar=no")},async exporting(e){let t={...this.queryForm};"2"===e&&(t.pageSize=this.total,t.pageNum=1);const o=await(0,c.lP)(t);if(0===o.code){const e=this.$refs.table.getColumns(),t=o.rows.map((t=>{let o=e.map((e=>[e.label,`${(0,m.h)(t[e.prop],this.dropdowns[e.prop])}`]));return Object.fromEntries(o)}));return t}}}},h=f,b=o(1001),w=(0,b.Z)(h,u,p,!1,null,"2cf46689",null),k=w.exports}}]);