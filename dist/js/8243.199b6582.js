"use strict";(self["webpackChunkiov_platform"]=self["webpackChunkiov_platform"]||[]).push([[8243],{58243:function(t,e,o){o.r(e),o.d(e,{default:function(){return f}});var l=o(63598),a=function(){var t=this,e=t._self._c;return e("el-dialog",{attrs:{"close-on-click-modal":!1,title:"安装更换明细","append-to-body":!0,"before-close":t.close,"modal-append-to-body":!1,visible:t.show}},[e(l.Z,{ref:"table",attrs:{loading:t.tableLoading,total:t.total,data:t.tableData,height:"460","page-size":t.queryForm.pageSize,"current-page":t.queryForm.pageNum,derive:t.exporting},on:{"size-change":t.dataSizeChange,"current-change":t.handleCurrentChange},scopedSlots:t._u([{key:"columns",fn:function(){return[e("el-table-column",{attrs:{prop:"installNo","show-overflow-tooltip":"",label:"单号"}}),e("el-table-column",{attrs:{prop:"applyWay","show-overflow-tooltip":"",label:"设备编号"}}),e("el-table-column",{attrs:{prop:"newStakeName","show-overflow-tooltip":"",label:"设备名称"}}),e("el-table-column",{attrs:{prop:"equipCateg","show-overflow-tooltip":"",label:"设备类型"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("transfortext")(e.row.equipCateg,t.dropdowns.equipCateg))+" ")]}}])}),e("el-table-column",{attrs:{prop:"installType","show-overflow-tooltip":"",label:"安装类别"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("transfortext")(e.row.installType,t.dropdowns.installType))+" ")]}}])}),e("el-table-column",{attrs:{prop:"oldApplyWay","show-overflow-tooltip":"",label:"设备编号(换)"}}),e("el-table-column",{attrs:{prop:"oldStakeName","show-overflow-tooltip":"",label:"设备名称(换)"}}),e("el-table-column",{attrs:{prop:"old_modelCode","show-overflow-tooltip":"",label:"设备型号(换)"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("transfortext")(e.row.old_modelCode,t.dropdowns.old_modelCode))+" ")]}}])}),e("el-table-column",{attrs:{prop:"faultType","show-overflow-tooltip":"",label:"故障类别(换)"}}),e("el-table-column",{attrs:{prop:"remark","show-overflow-tooltip":"",label:"故障说明(换)"}})]},proxy:!0}])}),e("span",{attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:t.close}},[t._v("知道了")])],1)],1)},r=[],s=o(74713),n=o(5376),p=o(30741),i=o(90886),d={name:"property-supplier-index",mixins:[p.oA],filters:{transfortext:i.h},data(){return{tableLoading:!1,dropdowns:{equipCateg:[],old_modelCode:[],installType:[]},queryForm:{installNo:"",pageSize:this.$tableDataSize,pageNum:1},tableData:[],total:0}},props:{show:{type:Boolean,default:!1},data:{type:Object,default(){return{}}}},watch:{show(t){t&&(this.getDropdowns(),this.queryForm.pageSize=this.$tableDataSize,this.queryForm.pageNum=1,this.queryForm.installNo=this.data.installNo,this.getData())}},methods:{getData(){this.tableData=[],this.tableLoading=!0,(0,s.Oq)(this.queryForm).then((t=>{this.tableLoading=!1,0===t.code&&(this.tableData=t.rows,this.total=t.total)})).catch((()=>{this.tableLoading=!1}))},getDropdowns(){(0,n.Wl)("3004").then((t=>{0===t.code&&(this.dropdowns.equipCateg=t.data)})),(0,n.Wl)("63002").then((t=>{0===t.code&&(this.dropdowns.installType=t.data)})),(0,n.Wl)("3005").then((t=>{0===t.code&&(this.dropdowns.old_modelCode=t.data)}))},async exporting(t){let e={...this.queryForm};"2"===t&&(e.pageSize=this.total,e.pageNum=1);const o=await(0,s.Oq)(e);if(0===o.code){const t=this.$refs.table.getColumns(),e=o.rows.map((e=>{let o=t.map((t=>[t.label,`${(0,i.h)(e[t.prop],this.dropdowns[t.prop])}`]));return Object.fromEntries(o)}));return e}},close(){this.$emit("close",!1)}}},u=d,h=o(1001),c=(0,h.Z)(u,a,r,!1,null,"44d2dd80",null),f=c.exports}}]);