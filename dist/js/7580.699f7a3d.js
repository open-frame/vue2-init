"use strict";(self["webpackChunkiov_platform"]=self["webpackChunkiov_platform"]||[]).push([[7580],{88201:function(t,e,r){r.r(e),r.d(e,{default:function(){return b}});var o=function(){var t=this,e=t._self._c;return e("el-dialog",{attrs:{"close-on-click-modal":!1,"append-to-body":!0,"modal-append-to-body":!1,title:t.dialogText,visible:t.show,"show-close":!1}},[e("el-form",{ref:"ruleForm",attrs:{model:t.submitForm,rules:t.rules,"label-width":"130px"}},[e("el-form-item",{attrs:{label:"提交人"}},[e("el-input",{attrs:{disabled:!0},model:{value:t.submitForm.creatorName,callback:function(e){t.$set(t.submitForm,"creatorName",e)},expression:"submitForm.creatorName"}})],1),e("el-form-item",{attrs:{label:"所属站",prop:"UUID"}},[e("el-select",{attrs:{filterable:"","default-first-option":"",placeholder:"",disabled:"工单详情"===t.dialogText},model:{value:t.submitForm.UUID,callback:function(e){t.$set(t.submitForm,"UUID",e)},expression:"submitForm.UUID"}},t._l(t.dropdowns.allPowerStation,(function(t,r){return e("el-option",{key:r,attrs:{label:t.stationName,value:t.uuid}})})),1)],1),e("el-form-item",{attrs:{label:"设备编号",prop:"stakeNo"}},[e("el-input",{attrs:{disabled:"工单详情"===t.dialogText},model:{value:t.submitForm.stakeNo,callback:function(e){t.$set(t.submitForm,"stakeNo",e)},expression:"submitForm.stakeNo"}})],1),e("el-form-item",{attrs:{label:"端口",prop:"chargePort"}},[e("el-select",{attrs:{filterable:"","default-first-option":"",placeholder:"",multiple:"",disabled:!0},model:{value:t.submitForm.chargePort,callback:function(e){t.$set(t.submitForm,"chargePort",e)},expression:"submitForm.chargePort"}},t._l(t.dropdowns.ports,(function(t,r){return e("el-option",{key:r,attrs:{label:t.code_name,value:t.code_value}})})),1)],1),e("el-form-item",{attrs:{label:"问题描述",prop:"questionDetail"}},[e("el-input",{attrs:{type:"textarea",disabled:"工单详情"===t.dialogText},model:{value:t.submitForm.questionDetail,callback:function(e){t.$set(t.submitForm,"questionDetail",e)},expression:"submitForm.questionDetail"}})],1)],1),e("span",{attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:t.close}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitingForm("ruleForm")}}},[t._v("确 定")])],1)],1)},s=[],a=r(89176),i=r(5376),l=r(74713),m={name:"",data(){return this.rules=u,{dropdowns:{ports:[],allPowerStation:[]},submitForm:{workOrderId:"",UUID:"",stakeNo:"",chargePort:["1"],questionDetail:"",creatorName:this.$store.state.userInfo.loginName}}},created(){this.getDropdowns()},props:{show:{type:Boolean,default:!1},dialogText:{type:String,required:!0},data:{type:Object,default(){return{}}}},watch:{data(t){t.id&&("添加工单"===this.dialogText?delete this.submitForm.workOrderId:(0,a.C8)({workOrderId:this.data.workOrderId}).then((t=>{this.submitForm.UUID=t.data.stationUuid,this.submitForm.stationAddr=t.data.stationAddr,this.submitForm.stakeNo=t.data.stakeNo,this.submitForm.stakeAddr=t.data.stakeAddr,this.submitForm.chargePort=t.data.stakePort,this.submitForm.questionDetail=t.data.questionDetail})))}},methods:{getDropdowns(){(0,i.Wl)("3010").then((t=>{0===t.code&&(this.dropdowns.ports=t.data)})),(0,l.NK)({s:""}).then((t=>{this.dropdowns.allPowerStation=t.data}))},submitingForm(t){this.$refs[t].validate((t=>{if(!t)return!1;(0,a.YQ)(this.submitForm).then((t=>{0===t.code&&(this.$message.success(t.msg),this.close("ruleForm"),this.$emit("success"))}))}))},close(){this.$refs["ruleForm"].resetFields(),this.$emit("close",!1)}}};const u={UUID:[{required:!0,message:"请选择所属站",trigger:"change"}],stakeNo:[{required:!0,message:"请选择设备",trigger:"change"}],chargePort:[{required:!0,message:"请选择端口",trigger:"change"}],questionDetail:[{required:!0,message:"请填写问题描述",trigger:"blur"},{pattern:/^[^<|>|(|)|+|-|*|/|%|=|{|}]*$/,message:"禁止< > ( ) + - * / % = { }等特殊字符",trigger:"blur"}]};var d=m,n=r(1001),c=(0,n.Z)(d,o,s,!1,null,"c4162e86",null),b=c.exports}}]);