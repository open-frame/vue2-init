"use strict";(self["webpackChunkiov_platform"]=self["webpackChunkiov_platform"]||[]).push([[7885],{10175:function(e,s,i){i.r(s),i.d(s,{default:function(){return c}});var r=function(){var e=this,s=e._self._c;return s("el-dialog",{attrs:{"close-on-click-modal":!1,"append-to-body":!0,"modal-append-to-body":!1,title:"送券",visible:e.show,"show-close":!1}},[s("el-form",{ref:"give-ticket-form",attrs:{model:e.freeAdmissionForm,rules:e.freeAdmissionRules,"label-width":"130px"}},[s("el-form-item",{attrs:{label:"赠送数量：",prop:"cardNum"}},[s("el-input-number",{attrs:{precision:0,"controls-position":"right"},model:{value:e.freeAdmissionForm.cardNum,callback:function(s){e.$set(e.freeAdmissionForm,"cardNum",s)},expression:"freeAdmissionForm.cardNum"}})],1),s("el-form-item",{attrs:{label:"赠送金额：",prop:"sendMoney"}},[s("el-input",{attrs:{type:"number",clearable:""},model:{value:e.freeAdmissionForm.sendMoney,callback:function(s){e.$set(e.freeAdmissionForm,"sendMoney",s)},expression:"freeAdmissionForm.sendMoney"}})],1),s("el-form-item",{attrs:{label:"失效时间：",prop:"useTime"}},[s("el-date-picker",{attrs:{size:"medium",type:"datetime",clearable:"",format:"yyyy-MM-dd HH:mm:ss","value-format":"yyyy-MM-dd HH:mm:ss","picker-options":e.pickerOptions},model:{value:e.freeAdmissionForm.useTime,callback:function(s){e.$set(e.freeAdmissionForm,"useTime",s)},expression:"freeAdmissionForm.useTime"}})],1),s("el-form-item",{attrs:{label:"券限额类别：",prop:"limitType"}},[s("el-select",{attrs:{filterable:"","default-first-option":"",clearable:"",size:"medium",placeholder:""},model:{value:e.freeAdmissionForm.limitType,callback:function(s){e.$set(e.freeAdmissionForm,"limitType",s)},expression:"freeAdmissionForm.limitType"}},e._l(e.dropdowns.limitType,(function(e,i){return s("el-option",{key:i,attrs:{label:e.code_name,value:e.code_value}})})),1)],1)],1),s("span",{attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:e.close}},[e._v("关 闭")]),s("el-button",{attrs:{type:"primary"},on:{click:e.freeAdmission}},[e._v("赠 送")])],1)],1)},t=[],o=i(24779),m=i(5376),l={name:"",props:{show:{type:Boolean,default:!1},data:{type:Object,required:!0}},data(){return{pickerOptions:{disabledDate(e){return e.getTime()<Date.now()-864e5}},dropdowns:{limitType:[]},freeAdmissionRules:n,freeAdmissionForm:{userId:"",cardNum:"",sendMoney:"",useTime:"",limitType:""}}},watch:{data(e){e.userId&&(this.getDropdowns(),this.freeAdmissionForm.userId=e.userId)}},methods:{getDropdowns(){(0,m.Wl)("3047").then((e=>{0===e.code&&(this.dropdowns.limitType=e.data)}))},freeAdmission(){this.$refs["give-ticket-form"].validate((e=>{e&&(0,o.Mw)(this.freeAdmissionForm).then((e=>{0===e.code&&(this.$message.success("赠送成功"),this.close(),this.$emit("success"))}))}))},close(){this.$refs["give-ticket-form"].resetFields(),this.$emit("close",!1)}}};const n={limitType:[{required:!0,message:"请选择限额类别",trigger:"change"}],sendMoney:[{required:!0,message:"请输入赠送金额",trigger:"blur"}],cardNum:[{required:!0,message:"请输入赠送数量",trigger:"blur"},{type:"number",min:1,max:9999999,message:"赠送数量错误",trigger:"blur"}],useTime:[{required:!0,message:"请选择券的失效时间",trigger:"change"}]};var a=l,d=i(1001),u=(0,d.Z)(a,r,t,!1,null,"4cd202da",null),c=u.exports}}]);