"use strict";(self["webpackChunkiov_platform"]=self["webpackChunkiov_platform"]||[]).push([[5048],{35048:function(e,t,r){r.r(t),r.d(t,{default:function(){return h}});var l=r(1985),a=r(63598),i=r(66172),s=r(67539),o=function(){var e=this,t=e._self._c;return t("el-card",{},[t(s.Z,{attrs:{loading:e.tableLoading,btnSpan:20,getData:e.getData,queryReset:e.queryReset}},[t("el-col",{attrs:{span:4}},[t(i.Z,{ref:"supplier-select",attrs:{animatLable:""},on:{change:e.pageReset},model:{value:e.queryForm.merchantNo,callback:function(t){e.$set(e.queryForm,"merchantNo",t)},expression:"queryForm.merchantNo"}})],1)],1),t("el-divider"),t(a.Z,{ref:"table",attrs:{loading:e.tableLoading,total:e.total,data:e.tableData,height:"550","row-key":"device_name","page-size":e.queryForm.pageSize,"current-page":e.queryForm.pageNum},on:{"size-change":e.dataSizeChange,"current-change":e.handleCurrentChange},scopedSlots:e._u([{key:"left",fn:function(){return[t("el-button",{attrs:{size:"small",icon:"el-icon-plus"},on:{click:function(t){return e.editing("add")}}},[e._v("新增")])]},proxy:!0},{key:"columns",fn:function(){return[t("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"供应商编号",prop:"merchantNo"}}),t("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"供应商名称",prop:"merchantName"}}),t("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"地址",prop:"address"}}),t("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"统一社会信用代码",prop:"socialCreditCode"}}),t("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"联系人",prop:"connector"}}),t("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"联系方式",prop:"phone"}}),t("el-table-column",{attrs:{label:"操作",width:"100",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(r){return[t("el-button",{attrs:{plain:"",type:"primary",size:"mini"},on:{click:function(t){return e.editing("modification",r.row)}}},[e._v(" 详情 ")])]}}])})]},proxy:!0}])}),t("el-dialog",{attrs:{"close-on-click-modal":!1,title:e.supplierDataVisibleText+"供应商","append-to-body":!0,"modal-append-to-body":!1,visible:e.supplierDataVisible,"before-close":e.closeSupplierDataVisible}},[t("el-form",{ref:"submitSupplierForm",attrs:{model:e.submitSupplierForm,rules:e.rules,"label-width":"150px"}},["修改"===e.supplierDataVisibleText?t("el-form-item",{attrs:{label:"供应商编号",prop:"merchantNo"}},[t("el-input",{attrs:{clearable:"",readonly:"新增"!==e.supplierDataVisibleText},model:{value:e.submitSupplierForm.merchantNo,callback:function(t){e.$set(e.submitSupplierForm,"merchantNo",t)},expression:"submitSupplierForm.merchantNo"}})],1):e._e(),t("el-form-item",{attrs:{label:"供应商名称",prop:"merchantName"}},[t("el-input",{attrs:{clearable:""},model:{value:e.submitSupplierForm.merchantName,callback:function(t){e.$set(e.submitSupplierForm,"merchantName",t)},expression:"submitSupplierForm.merchantName"}})],1),t("el-form-item",{attrs:{label:"联系人",prop:"connector"}},[t("el-input",{attrs:{clearable:""},model:{value:e.submitSupplierForm.connector,callback:function(t){e.$set(e.submitSupplierForm,"connector",t)},expression:"submitSupplierForm.connector"}})],1),t("el-form-item",{attrs:{label:"联系方式",prop:"phone"}},[t("el-input",{attrs:{clearable:""},model:{value:e.submitSupplierForm.phone,callback:function(t){e.$set(e.submitSupplierForm,"phone",t)},expression:"submitSupplierForm.phone"}})],1),t("el-form-item",{attrs:{label:"统一社会信用代码",prop:"socialCreditCode"}},[t("el-input",{attrs:{clearable:""},model:{value:e.submitSupplierForm.socialCreditCode,callback:function(t){e.$set(e.submitSupplierForm,"socialCreditCode",t)},expression:"submitSupplierForm.socialCreditCode"}})],1),t("el-form-item",{attrs:{label:"地址",prop:"address"}},[t("el-input",{attrs:{clearable:""},model:{value:e.submitSupplierForm.address,callback:function(t){e.$set(e.submitSupplierForm,"address",t)},expression:"submitSupplierForm.address"}})],1),t("el-form-item",{attrs:{label:"法人",prop:"legalPerson"}},[t("el-input",{attrs:{clearable:""},model:{value:e.submitSupplierForm.legalPerson,callback:function(t){e.$set(e.submitSupplierForm,"legalPerson",t)},expression:"submitSupplierForm.legalPerson"}})],1),t("el-form-item",{attrs:{label:"主营业务",prop:"msgDetail"}},[t("el-input",{attrs:{clearable:""},model:{value:e.submitSupplierForm.msgDetail,callback:function(t){e.$set(e.submitSupplierForm,"msgDetail",t)},expression:"submitSupplierForm.msgDetail"}})],1),t("el-form-item",{attrs:{label:"所属组织",prop:"belongOrg"}},[t(l.Z,{model:{value:e.submitSupplierForm.belongOrg,callback:function(t){e.$set(e.submitSupplierForm,"belongOrg",t)},expression:"submitSupplierForm.belongOrg"}})],1)],1),t("span",{attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.closeSupplierDataVisible}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.submitSupplier}},[e._v(" "+e._s(e.supplierDataVisibleText)+" ")])],1)],1)],1)},p=[],u=r(74713),m=r(30741),n={name:"property-supplier-index",mixins:[m.LI,m.I_,m.oA,m.vd],data(){return this.rules=b,{tableLoading:!1,queryForm:{merchantNo:"",pageSize:this.$tableDataSize,pageNum:1},tableData:[],total:0,supplierDataVisibleText:"",supplierDataVisible:!1,submitSupplierForm:{merchantNo:"",merchantName:"",connector:"",phone:"",socialCreditCode:"",address:"",legalPerson:"",msgDetail:"",belongOrg:""}}},methods:{getData(){this.tableLoading=!0,this.tableData=[],(0,u.rH)(this.queryForm).then((e=>{this.tableLoading=!1,0===e.code&&(this.tableData=e.rows,this.total=e.total)})).catch((()=>{this.tableLoading=!1}))},editing(e,t){if(this.supplierDataVisible=!0,"add"===e)this.supplierDataVisibleText="添加";else{this.supplierDataVisibleText="修改";const e=this;this.$nextTick((()=>{for(let r in e.submitSupplierForm)e.submitSupplierForm[r]=t[r]}))}},submitSupplier(){this.$refs["submitSupplierForm"].validate((e=>{e&&(0,u.xt)(this.submitSupplierForm).then((e=>{0===e.code&&(this.$message.success(e.msg),this.getData(),this.closeSupplierDataVisible())}))}))},closeSupplierDataVisible(){this.supplierDataVisible=!1,this.$refs["submitSupplierForm"].resetFields()},async exporting(e){let t={...this.queryForm};"2"===e&&(t.pageSize=this.total,t.pageNum=1);const r=await(0,u.rH)(t);if(0===r.code){const e=this.$refs.table.getColumns(),t=r.rows.map((t=>{let r=e.map((e=>[e.label,t[e.prop]]));return Object.fromEntries(r)}));return t}}}};const b={merchantName:[{required:!0,message:"供应商名称必填项！",trigger:"blur"},{pattern:/^[\u4e00-\u9fa50-9a-zA-Z]*$/,message:"只能为中文汉字、数字、字母",trigger:"blur"},{min:2,max:48,message:"长度在 2 到 48 个字符",trigger:"blur"}],connector:[{required:!0,message:"联系人必填项！",trigger:"blur"},{pattern:/^[\u4e00-\u9fa5]*$/,message:"只能为中文名字",trigger:"blur"},{min:2,max:12,message:"长度在 2 到 12 个字符",trigger:"blur"}],phone:[{required:!0,message:"联系方式为必填项！",trigger:"blur"},{pattern:/^[0-9]+$/,message:"只能为数字",trigger:"blur"},{min:7,max:16,message:"长度在 7 到 16 个字符",trigger:"blur"}],socialCreditCode:[{required:!0,message:"请输入地址",trigger:"blur"},{pattern:/^[^<|>|(|)|+|-|*|/|%|=]*$/,message:"禁止< > ( ) + - * / % = 等特殊字符",trigger:"blur"},{min:3,max:48,message:"长度在 3 到 48 个字符",trigger:"blur"}],address:[{required:!0,message:"请输入地址",trigger:"blur"},{pattern:/^[^<|>|(|)|+|-|*|/|%|=]*$/,message:"禁止< > ( ) + - * / % = 等特殊字符",trigger:"blur"},{min:3,max:48,message:"长度在 3 到 48 个字符",trigger:"blur"}],legalPerson:[{required:!0,message:"法人必填项！",trigger:"blur"},{pattern:/^[\u4e00-\u9fa5]*$/,message:"只能为中文汉字",trigger:"blur"},{min:2,max:48,message:"长度在 2 到 48 个字符",trigger:"blur"}],msgDetail:[{required:!0,message:"请输入主营业务",trigger:"blur"},{pattern:/^[^<|>|(|)|+|-|*|/|%|=]*$/,message:"禁止< > ( ) + - * / % = 等特殊字符",trigger:"blur"},{min:3,max:48,message:"长度在 3 到 48 个字符",trigger:"blur"}],belongOrg:[{required:!0,message:"请选择所属组织",trigger:"change"}]};var c=n,g=r(1001),d=(0,g.Z)(c,o,p,!1,null,"32468a0c",null),h=d.exports}}]);