"use strict";(self["webpackChunkiov_platform"]=self["webpackChunkiov_platform"]||[]).push([[4096],{44096:function(e,t,a){a.r(t),a.d(t,{default:function(){return h}});var n=a(63598),o=a(75267),r=a(67539),i=function(){var e=this,t=e._self._c;return t("el-card",{staticClass:"config-area"},[t(r.Z,{attrs:{loading:e.tableLoading,btnSpan:16,getData:e.getData,queryReset:e.queryReset}},[t("el-col",{attrs:{span:4}},[t(o.Z,{attrs:{clearable:"",placeholder:"区域名称"},on:{change:e.pageReset},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getData.apply(null,arguments)}},model:{value:e.queryForm.construction,callback:function(t){e.$set(e.queryForm,"construction",t)},expression:"queryForm.construction"}})],1),t("el-col",{attrs:{span:4}},[t(o.Z,{attrs:{clearable:"",placeholder:"区域ID"},on:{change:e.pageReset},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getData.apply(null,arguments)}},model:{value:e.queryForm.constructionUuid,callback:function(t){e.$set(e.queryForm,"constructionUuid",t)},expression:"queryForm.constructionUuid"}})],1)],1),t("el-divider"),t(n.Z,{ref:"table",attrs:{loading:e.tableLoading,total:e.total,data:e.tableData,height:"550","row-key":"uuid","page-size":e.queryForm.pageSize,"current-page":e.queryForm.pageNum,derive:e.exporting},on:{"selection-change":e.selectingData,"size-change":e.dataSizeChange,"current-change":e.handleCurrentChange},scopedSlots:e._u([{key:"left",fn:function(){return[t("el-button",{attrs:{size:"small",icon:"el-icon-plus"},on:{click:function(t){return e.editData("add")}}},[e._v("新增")]),t("el-button",{attrs:{size:"small",icon:"el-icon-delete"},on:{click:function(t){return e.deleteing("more")}}},[e._v("删除")])]},proxy:!0},{key:"columns",fn:function(){return[t("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"uuid",label:"id"}}),t("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"construction",label:"名称"}}),t("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"creatorName",label:"创建人"}}),t("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"createAt",label:"创建时间"}}),t("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{plain:"",size:"mini",type:"primary"},on:{click:function(t){return e.editData("modification",a.row)}}},[e._v("修改")]),t("el-button",{attrs:{plain:"",size:"mini",type:"danger"},on:{click:function(t){return e.deleteing("one",a.row)}}},[e._v("删除")])]}}])})]},proxy:!0}])})],1)},l=[],s=(a(57658),a(24779)),u=a(30741),c={name:"management-config-area-index",mixins:[u.LI,u.I_,u.oA,u.vd],data(){return{tableLoading:!1,queryForm:{pageNum:1,pageSize:this.$tableDataSize,construction:"",constructionUuid:""},tableData:[],total:0,moreSelectData:[]}},methods:{getData(){this.tableData=[],this.tableLoading=!0,(0,s.ao)(this.queryForm).then((e=>{this.tableLoading=!1,0===e.code&&(this.tableData=e.rows,this.total=e.total)})).catch((()=>{this.tableLoading=!1}))},selectingData(e){this.moreSelectData=e},editData(e,t){let a,n;"add"===e?a="新增区域":(a="修改区域",n=t.construction);const o=this;this.$prompt("请输入区域名称：",a,{inputValue:n,beforeClose(e,t,a){if("confirm"===e&&!t.inputValue)return this.$message.warning("不能为空");a()}}).then((a=>{if(!a.value)return;if("modification"===e&&a.value===t.construction)return;const n={addArea:s.Se,modificationArea:s.Qn};n["add"===e?"addArea":"modificationArea"]({construction:a.value,uuid:"modification"===e?t.uuid:""}).then((e=>{0===e.code&&(this.$message.success(e.msg),o.getData())}))})).catch((()=>{}))},deleteing(e,t){if("more"===e&&this.moreSelectData.length<1)return this.$message.warning("请选择删除项"),!1;this.$confirm("一旦删除不可恢复，确定删除？","删除提醒").then((()=>{let a=[];if("one"===e)a.push(t.uuid);else{a=[];for(let e of this.moreSelectData)a.push(e.uuid)}(0,s.jh)({uuids:a}).then((e=>{0===e.code&&(this.$message.success("已删除"),this.getData(),this.moreSelectData=[])}))})).catch((()=>{}))},async exporting(e){let t={...this.queryForm};"2"===e&&(t.pageSize=this.total,t.pageNum=1);const a=await(0,s.ao)(t);if(0===a.code){const e=this.$refs.table.getColumns(),t=a.rows.map((t=>{let a=e.map((e=>[e.label,t[e.prop]]));return Object.fromEntries(a)}));return t}}}},d=c,p=a(1001),m=(0,p.Z)(d,i,l,!1,null,"26fd3914",null),h=m.exports}}]);