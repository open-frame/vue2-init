"use strict";(self["webpackChunkiov_platform"]=self["webpackChunkiov_platform"]||[]).push([[7857],{77857:function(e,t,o){o.r(t),o.d(t,{default:function(){return y}});var a=o(63598),l=o(75267),r=o(71377),n=o(67539),s=function(){var e=this,t=e._self._c;return t("el-card",{staticClass:"user"},[t(n.Z,{attrs:{loading:e.tableLoading,btnSpan:8,getData:e.getData,queryReset:e.queryReset}},[t("el-col",{attrs:{span:4}},[t(l.Z,{attrs:{clearable:"",size:"medium",placeholder:"用户账户"},on:{change:e.pageReset},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getData.apply(null,arguments)}},model:{value:e.queryForm.userId,callback:function(t){e.$set(e.queryForm,"userId",t)},expression:"queryForm.userId"}})],1),t("el-col",{attrs:{span:4}},[t(l.Z,{attrs:{clearable:"",size:"medium",placeholder:"活动编号"},on:{change:e.pageReset},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getData.apply(null,arguments)}},model:{value:e.queryForm.eventNo,callback:function(t){e.$set(e.queryForm,"eventNo",t)},expression:"queryForm.eventNo"}})],1),t("el-col",{attrs:{span:4}},[t(r["default"],{attrs:{filterable:"","default-first-option":"",clearable:"",size:"medium",placeholder:"券状态"},on:{change:e.pageReset},model:{value:e.queryForm.balanceStatus,callback:function(t){e.$set(e.queryForm,"balanceStatus",t)},expression:"queryForm.balanceStatus"}},e._l(e.dropdowns.balanceStatus,(function(e,o){return t("el-option",{key:o,attrs:{label:e.code_name,value:e.code_value}})})),1)],1),t("el-col",{attrs:{span:4}},[t(l.Z,{attrs:{clearable:"",size:"medium",placeholder:"券编号"},on:{change:e.pageReset},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getData.apply(null,arguments)}},model:{value:e.queryForm.balanceNo,callback:function(t){e.$set(e.queryForm,"balanceNo",t)},expression:"queryForm.balanceNo"}})],1)],1),t("el-divider"),t(a.Z,{ref:"table",attrs:{loading:e.tableLoading,total:e.total,data:e.tableData,height:"570","page-size":e.queryForm.pageSize,"current-page":e.queryForm.pageNum,derive:e.exporting},on:{"size-change":e.dataSizeChange,"current-change":e.handleCurrentChange},scopedSlots:e._u([{key:"columns",fn:function(){return[t("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"用户id",prop:"userId"}}),t("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"余额类别"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e._f("transfortext")(t.row.balanceType,e.dropdowns.balanceType))+" ")]}}])}),t("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"消费卡编号",prop:"balanceNo"}}),t("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"券面额",prop:"sendAmount"}}),t("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"剩余面额",prop:"powerMoney"}}),t("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"使用范围"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e._f("transfortext")(t.row.useLimit,e.dropdowns.useLimit))+" ")]}}])}),t("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"有效期",prop:"useTime"}}),t("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"活动状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e._f("transfortext")(t.row.balanceStatus,e.dropdowns.balanceStatus))+" ")]}}])}),t("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"操作时间",prop:"operationTime"}}),t("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"操作人",prop:"operatorName"}}),t("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"活动编号",prop:"eventNo"}}),t("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"活动名称",prop:"eventName"}}),t("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"活动类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e._f("transfortext")(t.row.promoType,e.dropdowns.promoType))+" ")]}}])}),t("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"限额情况"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e._f("transfortext")(t.row.limitType,e.dropdowns.limitType))+" ")]}}])})]},proxy:!0}])})],1)},p=[],u=o(89176),i=o(5376),c=o(90886),d=o(30741),b={name:"operational-ticket-index",mixins:[d.LI,d.I_,d.oA,d.vd],filters:{transfortext:c.h},data(){return{dropdowns:{balanceStatus:[],balanceType:[],useLimit:[],promoType:[],limitType:[]},tableLoading:!1,tableConfig:{show:!1,nowColumn:[],allColumn:[{label:"券状态",prop:"balanceStatus"},{label:"优惠类型",prop:"promoType"},{label:"账户",prop:"userId"},{label:"限额类别",prop:"limitType"},{label:"领取时间",prop:"operationTime"},{label:"发布人",prop:"operatorName"},{label:"活动编号",prop:"eventNo"},{label:"余额类别",prop:"balanceType"},{label:"券金额",prop:"powerMoney"},{label:"卡编号",prop:"balanceNo"},{label:"有效期",prop:"useTime"},{label:"活动名称",prop:"eventName"},{label:"使用范围",prop:"useLimit"}]},queryForm:{pageSize:this.$tableDataSize,pageNum:1,userId:"",eventNo:"",balanceStatus:"",balanceNo:""},tableData:[],tableDataId:"",tableHeadId:"",total:0}},created(){this.tableDataId=this.$route.path+"-coupon-user-table-column",this.tableHeadId=this.$route.path+"-coupon-user-table-head",this.tableConfig.nowColumn=JSON.parse(localStorage.getItem(this.tableDataId))||this.tableConfig.allColumn,this.getDropdowns()},methods:{getDropdowns(){(0,i.Wl)("1012").then((e=>{0===e.code&&(this.dropdowns.balanceStatus=e.data)})),(0,i.Wl)("3042").then((e=>{0===e.code&&(this.dropdowns.balanceType=e.data)})),(0,i.Wl)("3043").then((e=>{0===e.code&&(this.dropdowns.useLimit=e.data)})),(0,i.Wl)("3034").then((e=>{0===e.code&&(this.dropdowns.promoType=e.data)})),(0,i.Wl)("3047").then((e=>{0===e.code&&(this.dropdowns.limitType=e.data)}))},getData(){this.tableData=[],this.tableLoading=!0,(0,u.Ay)(this.queryForm).then((e=>{this.tableLoading=!1,0===e.code&&(this.total=e.total,this.tableData=e.rows)})).catch((()=>{this.tableLoading=!1}))},async exporting(e){let t={...this.queryForm};"2"===e&&(t.pageSize=this.total,t.pageNum=1);const o=await(0,u.Ay)(t);if(0===o.code){const e=this.$refs.table.getColumns(),t=o.rows.map((t=>{let o=e.map((e=>[e.label,`${(0,c.h)(t[e.prop],this.dropdowns[e.prop])}`]));return Object.fromEntries(o)}));return t}}}},m=b,f=o(1001),h=(0,f.Z)(m,s,p,!1,null,"57a8d8a3",null),y=h.exports}}]);