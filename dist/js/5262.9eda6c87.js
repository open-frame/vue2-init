"use strict";(self["webpackChunkedo_project"]=self["webpackChunkedo_project"]||[]).push([[5262],{5262:function(e,t,i){i.r(t),i.d(t,{default:function(){return y}});var n=function(){var e=this,t=e._self._c;return t("el-card",{staticClass:"role"},[t("el-row",{attrs:{gutter:40}},[t("el-col",{attrs:{span:4}},[t("el-input",{attrs:{clearable:"",size:"medium",placeholder:"字典名称"},on:{change:e.pageReset},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getData.apply(null,arguments)}},model:{value:e.queryForm.comment,callback:function(t){e.$set(e.queryForm,"comment",t)},expression:"queryForm.comment"}})],1),t("el-col",{attrs:{span:4}},[t("el-input",{attrs:{clearable:"",size:"medium",placeholder:"字典编号"},on:{change:e.pageReset},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getData.apply(null,arguments)}},model:{value:e.queryForm.codeType,callback:function(t){e.$set(e.queryForm,"codeType",t)},expression:"queryForm.codeType"}})],1),t("el-col",{staticClass:"text-end",attrs:{span:16}},[t("el-button",{attrs:{type:"primary"},on:{click:e.getData}},[e._v("搜索")]),t("el-button",{on:{click:e.reset}},[e._v("重置")])],1)],1),t("el-divider"),t("edo-table",{attrs:{loading:e.loading,total:e.total,data:e.tableData,height:"570",border:!1,"row-key":"codeType","page-size":e.queryForm.pageSize,"current-page":e.queryForm.pageNum},on:{"current-change":e.handleCurrentChange,"size-change":e.dataSizeChange,exporting:e.exporting,printing:e.printing},scopedSlots:e._u([{key:"left",fn:function(){return[t("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"function_edit",expression:"'function_edit'"}],attrs:{size:"small",icon:"el-icon-plus"},on:{click:function(t){return e.editing("add")}}},[e._v("新增")])]},proxy:!0},{key:"columns",fn:function(){return[t("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"字典编号",prop:"codeType"}}),t("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"字典名称",prop:"comment"}}),t("el-table-column",{attrs:{width:"300",label:"操作",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(i){return[t("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"function_edit",expression:"'function_edit'"}],attrs:{plain:"",type:"primary",size:"small"},on:{click:function(t){return e.editing("modification",i.row)}}},[e._v("编辑")]),t("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"function_config",expression:"'function_config'"}],attrs:{plain:"",type:"info",size:"small"},on:{click:function(t){return e.openEditDictionDrawer(i.row)}}},[e._v("配置")]),t("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"function_delete",expression:"'function_delete'"}],attrs:{plain:"",type:"danger",size:"small"},on:{click:function(t){return e.deleteing(i.row)}}},[e._v("删除")])]}}])})]},proxy:!0}])}),t("dictionariesList",{attrs:{show:e.editDictionDrawer,data:e.dictionDetail},on:{"before-close":e.closeDictionariesDrawer}})],1)},o=[],a=i(2175),r=i(2791),s=i(1182),l=i(9844),c=i(4116),d=i(4996),p=i(2503),u={name:"system-dictionaries-index",mixins:[c.Z,d.Z,p.Z],directives:{permission:l.r},components:{dictionariesList:r["default"]},data(){return{loading:!1,queryForm:{codeType:"",comment:"",pageSize:this.$tableDataSize,pageNum:1},tableData:[],total:0,editDictionDrawer:!1,dictionDetail:{}}},created(){this.getData()},methods:{getData(){this.loading=!0,a.Z.dictionaries(this.queryForm).then((e=>{this.loading=!1,0===e.code&&(this.total=e.total,this.tableData=e.rows)}))},editing(e,t){let i,n;"add"===e?i="添加字典":(i="修改字典",n=t.comment);this.$prompt("请输入字典名称：",i,{inputValue:n,beforeClose(e,t,i){if("confirm"===e&&!t.inputValue)return this.$message.warning("不能为空");i()}}).then((i=>{i.value&&("modification"===e&&i.value===t.comment||a.Z["add"===e?"addDictionarie":"modificationDictionarie"]({comment:i.value,codeType:"modification"===e?t.codeType:""}).then((e=>{0===e.code&&(this.$message.success(e.msg),this.getData())})))})).catch((e=>{}))},deleteing(e){this.$confirm("一旦删除不可恢复，确定删除？","删除提醒",{distinguishCancelAndClose:!0,confirmButtonText:"确定",cancelButtonText:"放弃"}).then((()=>{a.Z.deleteDictionarie({codeType:e.codeType,comment:e.comment}).then((e=>{0===e.code&&(this.$message.success(e.msg),this.getData())}))})).catch((e=>{}))},openEditDictionDrawer(e){this.editDictionDrawer=!0,this.dictionDetail=e},closeDictionariesDrawer(e){this.editDictionDrawer=e},exporting(e){if(this.tableData.length<1)return this.$message.warning("无数据可导"),!1;const t=this.$loading({lock:!0,text:"正在获取数据...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});let i={...this.queryForm};"2"===e&&(i.pageSize=this.total,i.pageNum=1),a.Z.dictionaries(i).then((e=>{if(0===e.code){t.text="正在下载...";const i=e.rows.map((e=>({"字典编号":e.codeType,"字典名称":e.comment})));s.Z.excel(i,"字典表")}})).finally((()=>{t.close()}))},printing(e){let t={...this.queryForm};"2"===e&&(t.pageSize=this.total,t.pageNum=1);const i=[{field:"codeType",displayName:"字典编号"},{field:"comment",displayName:"字典名称"}];a.Z.dictionaries(t).then((e=>{printJS({type:"json",printable:e.rows,scanStyles:!0,header:'<h2 style="text-align: center">字典表</h2>',properties:i,style:"@media print{@page {size:landscape}}",gridHeaderStyle:"border: 1px solid #000;text-align:center",gridStyle:"border: 1px solid #000;text-align:center"})}))}}},m=u,g=i(1001),h=(0,g.Z)(m,n,o,!1,null,"7f16f454",null),y=h.exports}}]);