"use strict";(self["webpackChunkiov_platform"]=self["webpackChunkiov_platform"]||[]).push([[173],{83693:function(t,e,o){o.d(e,{B0:function(){return s},Db:function(){return u},Hf:function(){return m},IR:function(){return a},Iu:function(){return p},Ww:function(){return h},lB:function(){return i},o5:function(){return f},rJ:function(){return n},tJ:function(){return l},tZ:function(){return c},ts:function(){return d}});var r=o(92617);function n(t,e){return r.o.post("/flow/monitor/listProcess",t,e)}function a(t,e){return(0,r.o)({url:"/flow/monitor/getImage",method:"post",responseType:"blob",data:t,...e})}function s(t,e){return r.o.post("/flow/monitor/approveDetails",t,e)}function l(t,e){return r.o.post("/flow/stationRestore/details",t,e)}function i(t,e){return r.o.post("/flow/monitor/getProcessList",t,e)}function u(t,e){return r.o.post("/flow/monitor/suspendProcess",t,e)}function p(t,e){return r.o.post("/flow/stationRestore/add",t,e)}function c(t,e){return r.o.post("/flow/stationRestore/list",t,e)}function f(t,e){return r.o.post("/flow/stationRestore/complete",t,e)}function d(t,e){return r.o.post("/flow/monitor/getUserTaskNode",t,e)}function m(t,e){return r.o.post("/flow/monitor/endProcess",t,e)}function h(t,e){return r.o.post("/flow/monitor/taskJump",t,e)}},80173:function(t,e,o){o.r(e),o.d(e,{default:function(){return y}});var r=o(63598),n=o(71377),a=o(12025),s=o(67539),l=function(){var t=this,e=t._self._c;return e("el-card",{},[e(s.Z,{attrs:{loading:t.loading,btnSpan:8,getData:t.getData,queryReset:t.queryReset}},[e("el-col",{attrs:{span:4}},[e(n["default"],{attrs:{filterable:"","default-first-option":"",clearable:"",size:"medium",placeholder:"申请类别"},on:{change:t.pageReset},model:{value:t.queryForm.restoreType,callback:function(e){t.$set(t.queryForm,"restoreType",e)},expression:"queryForm.restoreType"}},t._l(t.dropdowns.restoreType,(function(t,o){return e("el-option",{key:o,attrs:{label:t.code_name,value:t.code_value}})})),1)],1),e("el-col",{attrs:{span:4}},[e(a.Z,{attrs:{animatLable:"",placeholder:"申请的电站"},on:{change:t.pageReset},model:{value:t.queryForm.stationNo,callback:function(e){t.$set(t.queryForm,"stationNo",e)},expression:"queryForm.stationNo"}})],1),e("el-col",{attrs:{span:4}},[e(n["default"],{attrs:{filterable:"","default-first-option":"",clearable:"",size:"medium",placeholder:"站类别"},on:{change:t.pageReset},model:{value:t.queryForm.stationType,callback:function(e){t.$set(t.queryForm,"stationType",e)},expression:"queryForm.stationType"}},t._l(t.dropdowns.stationType,(function(t,o){return e("el-option",{key:o,attrs:{label:t.code_name,value:t.code_value}})})),1)],1),e("el-col",{attrs:{span:4}},[e(n["default"],{attrs:{filterable:"","default-first-option":"",clearable:"",size:"medium",placeholder:"申请状态"},on:{change:t.pageReset},model:{value:t.queryForm.status,callback:function(e){t.$set(t.queryForm,"status",e)},expression:"queryForm.status"}},t._l(t.dropdowns.status,(function(t,o){return e("el-option",{key:o,attrs:{label:t.code_name,value:t.code_value}})})),1)],1)],1),e("el-divider"),e(r.Z,{ref:"table",attrs:{loading:t.loading,total:t.total,data:t.tableData,height:"560","row-key":"orderId","page-size":t.queryForm.pageSize,"current-page":t.queryForm.pageNum,derive:t.exporting},on:{"current-change":t.handleCurrentChange,"size-change":t.dataSizeChange},scopedSlots:t._u([{key:"left",fn:function(){return[e("el-button",{attrs:{icon:"el-icon-plus",size:"small"},on:{click:function(e){t.processDetailDialog=!0}}},[t._v("申请")])]},proxy:!0},{key:"columns",fn:function(){return[e("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"stationNo",label:"站编号"}}),e("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"stationName",label:"站名称"}}),e("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"stationType",label:"站类别"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("transfortext")(e.row.stationType,t.dropdowns.stationType))+" ")]}}])}),e("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"restoreType",label:"申请类别"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("transfortext")(e.row.restoreType,t.dropdowns.restoreType))+" ")]}}])}),e("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"reason",label:"申请原因"}}),e("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"status",label:"申请状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("transfortext")(e.row.status,t.dropdowns.status))+" ")]}}])}),e("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"createTime",label:"申请时间"}}),e("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"exeTime",label:"执行时间"}}),e("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"updateBy",label:"申请人"}}),e("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"procInstId",label:"流程id"}})]},proxy:!0}])}),e("apply-from",{attrs:{show:t.processDetailDialog},on:{close:function(e){t.processDetailDialog=!1},success:t.getData}})],1)},i=[],u=o(83693),p=o(90886),c=o(5376),f=o(30741),d={name:"process-list-index",filters:{transfortext:p.h},mixins:[f.I_,f.LI,f.oA,f.vd],components:{"apply-from":()=>o.e(2707).then(o.bind(o,82707))},data(){return{dropdowns:{stationType:[],restoreType:[]},loading:!1,queryForm:{stationNo:"",status:"",restoreType:"",stationType:"",pageSize:this.$tableDataSize,pageNum:1},tableData:[],total:0,processDetailDialog:!1}},created(){this.getDropdowns()},methods:{getDropdowns(){(0,c.Wl)("401007").then((t=>{0===t.code&&(this.dropdowns.status=t.data)})),(0,c.Wl)("3000").then((t=>{0===t.code&&(this.dropdowns.stationType=t.data)})),(0,c.Wl)("3001").then((t=>{0===t.code&&(this.dropdowns.restoreType=t.data)}))},getData(){this.loading=!0,this.tableData=[],(0,u.tZ)(this.queryForm).then((t=>{this.loading=!1,0===t.code&&t.rows&&(this.total=t.total,this.tableData=t.rows)})).catch((()=>{this.loading=!1}))},openProcessDetailDialog(){this.processDetailDialog=!0},async exporting(t){let e={...this.queryForm};"2"===t&&(e.pageSize=this.total,e.pageNum=1);const o=await(0,u.tZ)(e);if(0===o.code){const t=this.$refs.table.getColumns(),e=o.rows.map((e=>{let o=t.map((t=>[t.label,`${(0,p.h)(e[t.prop],this.dropdowns[t.prop])}`]));return Object.fromEntries(o)}));return e}}}},m=d,h=o(1001),w=(0,h.Z)(m,l,i,!1,null,"83f1839a",null),y=w.exports}}]);