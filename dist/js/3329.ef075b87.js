"use strict";(self["webpackChunkiov_platform"]=self["webpackChunkiov_platform"]||[]).push([[3329,2700,5376,2453,9397,9374,6955,3821,3399,67,1967,2727,1226,9287,4841,8297,8562,886,2335,6050,7504,2410,8243,3495,2617,8758],{90886:function(t,e,o){o.d(e,{f:function(){return l},h:function(){return a}});o(57658);function a(t,e=[],o={name:"code_name",value:"code_value"}){if(!t)return t;if(0===e.length)return t;if(!Object.hasOwn(e[0],"code_name")&&"code_name"===o.name)return t;if(t=t.toString(),t.includes(",")){let a=[];for(let l of t.split(","))a.push(e.find((t=>t[o.value]===l)));return a.map((t=>t[o.name])).join(",")}{const a=e.find((e=>e[o.value]===t));return a?a[o.name]:t}}function l(t){if(isNaN(t))return t;t=parseFloat(t),t=t.toFixed(2);const e=/\B(?=(\d{3})+(?!\d))/g;return t.replace(e,",")}},5376:function(t,e,o){o.d(e,{Jz:function(){return s},Wl:function(){return l},eL:function(){return r},hv:function(){return u},iS:function(){return i},oP:function(){return n}});o(57658);var a=o(92617);function l(t,e){return a.o.post("/select/box/selectBoxPoint",{codeType:t},e)}function n(t,e){return a.o.post("/system/dept/treeData",t,e)}async function r(t,e){const o=await a.o.post("/system/dept/treeData",t,e);let l=[];return 0===o.code&&function t(e){e.map((e=>{e.children&&t(e.children),l.push(e)}))}(o.data),l}function s(t,e){return a.o.post("/flow/monitor/getAssigneeList",t,e)}function i(){return a.o.get("/assetStake/getStationListByLoginUser")}function u(){return a.o.get("/system/user/add")}},58243:function(t,e,o){o.r(e),o.d(e,{default:function(){return h}});var a=o(63598),l=function(){var t=this,e=t._self._c;return e("el-dialog",{attrs:{"close-on-click-modal":!1,title:"安装更换明细","append-to-body":!0,"before-close":t.close,"modal-append-to-body":!1,visible:t.show}},[e(a.Z,{ref:"table",attrs:{loading:t.tableLoading,total:t.total,data:t.tableData,height:"460","page-size":t.queryForm.pageSize,"current-page":t.queryForm.pageNum,derive:t.exporting},on:{"size-change":t.dataSizeChange,"current-change":t.handleCurrentChange},scopedSlots:t._u([{key:"columns",fn:function(){return[e("el-table-column",{attrs:{prop:"installNo","show-overflow-tooltip":"",label:"单号"}}),e("el-table-column",{attrs:{prop:"applyWay","show-overflow-tooltip":"",label:"设备编号"}}),e("el-table-column",{attrs:{prop:"newStakeName","show-overflow-tooltip":"",label:"设备名称"}}),e("el-table-column",{attrs:{prop:"equipCateg","show-overflow-tooltip":"",label:"设备类型"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("transfortext")(e.row.equipCateg,t.dropdowns.equipCateg))+" ")]}}])}),e("el-table-column",{attrs:{prop:"installType","show-overflow-tooltip":"",label:"安装类别"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("transfortext")(e.row.installType,t.dropdowns.installType))+" ")]}}])}),e("el-table-column",{attrs:{prop:"oldApplyWay","show-overflow-tooltip":"",label:"设备编号(换)"}}),e("el-table-column",{attrs:{prop:"oldStakeName","show-overflow-tooltip":"",label:"设备名称(换)"}}),e("el-table-column",{attrs:{prop:"old_modelCode","show-overflow-tooltip":"",label:"设备型号(换)"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("transfortext")(e.row.old_modelCode,t.dropdowns.old_modelCode))+" ")]}}])}),e("el-table-column",{attrs:{prop:"faultType","show-overflow-tooltip":"",label:"故障类别(换)"}}),e("el-table-column",{attrs:{prop:"remark","show-overflow-tooltip":"",label:"故障说明(换)"}})]},proxy:!0}])}),e("span",{attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:t.close}},[t._v("知道了")])],1)],1)},n=[],r=o(74713),s=o(5376),i=o(30741),u=o(90886),p={name:"property-supplier-index",mixins:[i.oA],filters:{transfortext:u.h},data(){return{tableLoading:!1,dropdowns:{equipCateg:[],old_modelCode:[],installType:[]},queryForm:{installNo:"",pageSize:this.$tableDataSize,pageNum:1},tableData:[],total:0}},props:{show:{type:Boolean,default:!1},data:{type:Object,default(){return{}}}},watch:{show(t){t&&(this.getDropdowns(),this.queryForm.pageSize=this.$tableDataSize,this.queryForm.pageNum=1,this.queryForm.installNo=this.data.installNo,this.getData())}},methods:{getData(){this.tableData=[],this.tableLoading=!0,(0,r.Oq)(this.queryForm).then((t=>{this.tableLoading=!1,0===t.code&&(this.tableData=t.rows,this.total=t.total)})).catch((()=>{this.tableLoading=!1}))},getDropdowns(){(0,s.Wl)("3004").then((t=>{0===t.code&&(this.dropdowns.equipCateg=t.data)})),(0,s.Wl)("63002").then((t=>{0===t.code&&(this.dropdowns.installType=t.data)})),(0,s.Wl)("3005").then((t=>{0===t.code&&(this.dropdowns.old_modelCode=t.data)}))},async exporting(t){let e={...this.queryForm};"2"===t&&(e.pageSize=this.total,e.pageNum=1);const o=await(0,r.Oq)(e);if(0===o.code){const t=this.$refs.table.getColumns(),e=o.rows.map((e=>{let o=t.map((t=>[t.label,`${(0,u.h)(e[t.prop],this.dropdowns[t.prop])}`]));return Object.fromEntries(o)}));return e}},close(){this.$emit("close",!1)}}},d=p,c=o(1001),f=(0,c.Z)(d,l,n,!1,null,"44d2dd80",null),h=f.exports}}]);