"use strict";(self["webpackChunkiov_platform"]=self["webpackChunkiov_platform"]||[]).push([[6308],{36308:function(e,t,o){o.r(t),o.d(t,{default:function(){return w}});var a=o(63598),s=o(1985),r=o(71377),l=o(90649),i=o(67539),n=function(){var e=this,t=e._self._c;return t("el-card",{},[t(i.Z,{attrs:{loading:e.tableLoading,getData:e.getData,queryReset:e.queryReset}},[t("el-col",{attrs:{span:4}},[t(r["default"],{attrs:{filterable:"","default-first-option":"",clearable:"",size:"medium",placeholder:"设备类型"},on:{change:e.pageReset},model:{value:e.queryForm.typeCode,callback:function(t){e.$set(e.queryForm,"typeCode",t)},expression:"queryForm.typeCode"}},e._l(e.dropdowns.typeCode,(function(e,o){return t("el-option",{key:o,attrs:{label:e.code_name,value:e.code_value}})})),1)],1),t("el-col",{attrs:{span:4}},[t(r["default"],{attrs:{filterable:"","default-first-option":"",clearable:"",size:"medium",placeholder:"出库状态"},on:{change:e.pageReset},model:{value:e.queryForm.createStatus,callback:function(t){e.$set(e.queryForm,"createStatus",t)},expression:"queryForm.createStatus"}},e._l(e.dropdowns.createStatus,(function(e,o){return t("el-option",{key:o,attrs:{label:e.code_name,value:e.code_value}})})),1)],1),t("el-col",{attrs:{span:4}},[t(l.Z,{attrs:{size:"medium",type:"datetimerange",placeholder:"出库时间段",format:"yyyy-MM-dd HH:mm:ss","value-format":"yyyy-MM-dd HH:mm:ss"},on:{change:e.selectTime},model:{value:e.queryForm.timeQuantum,callback:function(t){e.$set(e.queryForm,"timeQuantum",t)},expression:"queryForm.timeQuantum"}})],1),t("el-col",{attrs:{span:4}},[t(r["default"],{attrs:{filterable:"","default-first-option":"",clearable:"",size:"medium",placeholder:"出库类型"},on:{change:e.pageReset},model:{value:e.queryForm.ioWhReasonCode,callback:function(t){e.$set(e.queryForm,"ioWhReasonCode",t)},expression:"queryForm.ioWhReasonCode"}},e._l(e.dropdowns.ioWhReasonCode,(function(e,o){return t("el-option",{key:o,attrs:{label:e.code_name,value:e.code_value}})})),1)],1),t("el-col",{attrs:{span:4}},[t(s.Z,{attrs:{animatLable:""},on:{change:e.pageReset},model:{value:e.queryForm.rcvReturnDept,callback:function(t){e.$set(e.queryForm,"rcvReturnDept",t)},expression:"queryForm.rcvReturnDept"}})],1)],1),t("el-divider"),t(a.Z,{ref:"table",attrs:{loading:e.tableLoading,total:e.total,data:e.tableData,height:"550","row-key":"device_name","page-size":e.queryForm.pageSize,"current-page":e.queryForm.pageNum},on:{"size-change":e.dataSizeChange,"current-change":e.handleCurrentChange},scopedSlots:e._u([{key:"left",fn:function(){return[t("el-button",{attrs:{size:"small",icon:"el-icon-upload2"},on:{click:function(t){return e.importDevice("Issue")}}},[e._v("出库")])]},proxy:!0},{key:"columns",fn:function(){return[t("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"出库单号",prop:"ioWhId"}}),t("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"出库类型",prop:"ioWhReasonCode"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e._f("transfortext")(t.row.ioWhReasonCode,e.dropdowns.ioWhReasonCode))+" ")]}}])}),t("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"设备类型",prop:"typeCode"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e._f("transfortext")(t.row.typeCode,e.dropdowns.typeCode))+" ")]}}])}),t("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"出库数量",prop:"ioWhNum"}}),t("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"出库日期",prop:"rcvReturnDate"}}),t("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"出库状态",prop:"createStatus"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e._f("transfortext")(t.row.createStatus,e.dropdowns.createStatus))+" ")]}}])}),t("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"库房",prop:"whNo"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e._f("transfortext")(t.row.whNo,e.dropdowns.whNo,{name:"name",value:"whNo"}))+" ")]}}])}),t("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"领用人",prop:"fetchEmpName"}}),t("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"所属部门",prop:"rcvReturnDept"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e._f("transfortext")(t.row.rcvReturnDept,e.dropdowns.rcvReturnDept,{name:"label",value:"deptCode"}))+" ")]}}])}),t("el-table-column",{attrs:{label:"操作",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(o){return[t("el-button",{attrs:{plain:"",type:"primary",size:"mini"},on:{click:function(t){return e.issueDetail("0",o.row)}}},[e._v(" 明细 ")])]}}])})]},proxy:!0}])}),t("issue-device",{attrs:{show:e.supplierDataVisible},on:{success:e.getData,close:e.closeSupplierDataVisible}}),t("issue-detail",{attrs:{show:e.issueDetailVisable,issueDetailData:e.issueDetailData},on:{close:e.closeBackDetail}})],1)},u=[],d=o(74713),c=o(5376),p=o(90886),m=o(30741),h={name:"property-inventory-out-index",mixins:[m.LI,m.I_,m.oA,m.vd],filters:{transfortext:p.h},components:{"issue-device":()=>Promise.all([o.e(5267),o.e(6172),o.e(8005),o.e(9685),o.e(1017),o.e(6782)]).then(o.bind(o,81017)),"issue-detail":()=>o.e(1315).then(o.bind(o,1315))},data(){return{tableLoading:!1,dropdowns:{typeCode:[],ioWhReasonCode:[],createStatus:[],whNo:[],rcvReturnDept:[]},queryForm:{timeQuantum:[],typeCode:"",startTime:"",endTime:"",createStatus:"",ioWhReasonCode:"",rcvReturnDept:"",pageSize:this.$tableDataSize,pageNum:1},tableData:[],total:0,selectedMoreData:[],supplierDataVisible:!1,issueDetailVisable:!1,issueDetailData:{ioWhReasonCode:"",ioWhReason:"",ioWhId:""},submitSupplierForm:{merchantName:"",connector:"",phone:"",socialCreditCode:"",address:"",legalPerson:"",msgDetail:"",belongOrg:""}}},created(){this.getDropdowns()},methods:{getDropdowns(){(0,c.Wl)("3004").then((e=>{0===e.code&&(this.dropdowns.typeCode=e.data)})),(0,c.Wl)("45257").then((e=>{0===e.code&&(this.dropdowns.ioWhReasonCode=e.data)})),(0,c.Wl)("45258").then((e=>{0===e.code&&(this.dropdowns.createStatus=e.data)})),(0,d.aM)({}).then((e=>{0===e.code&&(this.dropdowns.whNo=e.rows)})),(0,c.eL)().then((e=>{this.dropdowns.rcvReturnDept=e}))},selectTime(e){this.queryForm.pageNum=1,e?(this.queryForm.startTime=e[0],this.queryForm.endTime=e[1]):(this.queryForm.startTime="",this.queryForm.endTime="")},getData(){this.tableLoading=!0,this.tableData=[],(0,d.E2)(this.queryForm).then((e=>{this.tableLoading=!1,0===e.code&&(this.tableData=e.rows,this.total=e.total)})).catch((()=>{this.tableLoading=!1}))},importDevice(e,t){this.supplierDataVisible=!0},issueDetail(e,t){this.dropdowns.ioWhReasonCode.map((e=>{e.code_value==t.ioWhReasonCode&&(this.issueDetailData.ioWhReasonCode=e.code_name)})),this.issueDetailData.ioWhReason=t.ioWhReason,this.issueDetailData.ioWhId=t.ioWhId,this.backDetailType=e,this.issueDetailVisable=!0},selectingData(e){this.selectedMoreData=e},closeSupplierDataVisible(e){this.supplierDataVisible=e},closeBackDetail(e){this.issueDetailVisable=e}}},f=h,b=o(1001),y=(0,b.Z)(f,n,u,!1,null,"65998278",null),w=y.exports}}]);