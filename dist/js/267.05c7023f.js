"use strict";(self["webpackChunkiov_platform"]=self["webpackChunkiov_platform"]||[]).push([[267],{40267:function(e,t,o){o.r(t),o.d(t,{default:function(){return w}});var l=o(42355),r=o(63598),a=o(71377),s=o(75267),i=o(67539),n=function(){var e=this,t=e._self._c;return t("el-card",{staticClass:"helps"},[t(i.Z,{attrs:{loading:e.loading,btnSpan:12,getData:e.getData,queryReset:e.queryReset}},[t("el-col",{attrs:{span:4}},[t(s.Z,{attrs:{clearable:"",size:"medium",placeholder:"帮助内容关键字"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getData.apply(null,arguments)}},model:{value:e.queryForm.words,callback:function(t){e.$set(e.queryForm,"words",t)},expression:"queryForm.words"}})],1),t("el-col",{attrs:{span:4}},[t(a["default"],{attrs:{filterable:"","default-first-option":"",clearable:"",size:"medium",placeholder:"发布状态"},model:{value:e.queryForm.creatorRoleName,callback:function(t){e.$set(e.queryForm,"creatorRoleName",t)},expression:"queryForm.creatorRoleName"}},e._l(e.dropdowns.status,(function(e,o){return t("el-option",{key:o,attrs:{label:e.code_name,value:e.code_value}})})),1)],1),t("el-col",{attrs:{span:4}},[t(a["default"],{attrs:{filterable:"","default-first-option":"",clearable:"",size:"medium",placeholder:"帮助类型"},model:{value:e.queryForm.workOrderStatus,callback:function(t){e.$set(e.queryForm,"workOrderStatus",t)},expression:"queryForm.workOrderStatus"}},e._l(e.dropdowns.type,(function(e,o){return t("el-option",{key:o,attrs:{label:e.code_name,value:e.code_value}})})),1)],1)],1),t("el-divider"),t(r.Z,{ref:"table",attrs:{loading:e.loading,total:e.total,data:e.tableData,height:"500","row-key":"id","page-size":e.queryForm.pageSize,"current-page":e.queryForm.pageNum},on:{"size-change":e.dataSizeChange,"current-change":e.handleCurrentChange,"selection-change":e.selection},scopedSlots:e._u([{key:"left",fn:function(){return[t("el-button",{attrs:{size:"small",icon:"el-icon-edit"},on:{click:function(t){return e.editing("add")}}},[e._v("发布")]),t("el-button",{attrs:{size:"small",icon:"el-icon-delete"},on:{click:e.deleteing}},[e._v("删除")])]},proxy:!0},{key:"columns",fn:function(){return[t("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"类型",width:"110"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e._f("transfortext")(t.row.helpCategory,e.dropdowns.type))+" ")]}}])}),t("el-table-column",{attrs:{prop:"helpType",label:"标题",width:"180","show-overflow-tooltip":!0}}),t("el-table-column",{attrs:{prop:"helpContent",label:"内容","show-overflow-tooltip":!0}}),t("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"userName",label:"更新人",width:"130"}}),t("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"updateTime",label:"更新时间",width:"180"}}),t("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"发布状态",width:"90"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e._f("transfortext")(t.row.status,e.dropdowns.status))+" ")]}}])}),t("el-table-column",{attrs:{label:"操作",width:"160"},scopedSlots:e._u([{key:"default",fn:function(o){return[t("el-button",{attrs:{plain:"",size:"mini",type:"primary"},on:{click:function(t){return e.editing("modification",o.row)}}},[e._v("查看")]),t("el-dropdown",{staticClass:"ms-2",attrs:{trigger:"click"},on:{command:function(t){return e.handling(t,o.row)}}},[t("el-button",{attrs:{size:"mini"}},[e._v(" 更多"),t("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[t("el-dropdown-item",{attrs:{command:"changeStatus"}},[e._v(e._s("1"===o.row.status?"停用":"启用"))]),t("el-dropdown-item",{attrs:{command:"deleteing"}},[e._v("删除")])],1)],1)]}}])})]},proxy:!0}])}),t("el-dialog",{attrs:{"close-on-click-modal":!1,"append-to-body":!0,"modal-append-to-body":!1,title:e.dialogText,visible:e.showEditFormDialogrVisible,"show-close":!1}},[t("el-form",{ref:"ruleForm",attrs:{model:e.submiteForm,rules:e.rules,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"帮助类型",prop:"helpCategory"}},[t("el-select",{attrs:{filterable:"","default-first-option":"",clearable:"",placeholder:""},model:{value:e.submiteForm.helpCategory,callback:function(t){e.$set(e.submiteForm,"helpCategory",t)},expression:"submiteForm.helpCategory"}},e._l(e.dropdowns.type,(function(e,o){return t("el-option",{key:o,attrs:{label:e.code_name,value:e.code_value}})})),1)],1),t("el-form-item",{attrs:{label:"帮助标题",prop:"helpType"}},[t("el-input",{model:{value:e.submiteForm.helpType,callback:function(t){e.$set(e.submiteForm,"helpType",t)},expression:"submiteForm.helpType"}})],1),t("el-form-item",{attrs:{label:"文章状态",prop:"status"}},[t("el-select",{attrs:{filterable:"","default-first-option":"",clearable:"",placeholder:""},model:{value:e.submiteForm.status,callback:function(t){e.$set(e.submiteForm,"status",t)},expression:"submiteForm.status"}},e._l(e.dropdowns.status,(function(e,o){return t("el-option",{key:o,attrs:{label:e.code_name,value:e.code_value}})})),1)],1),t("el-form-item",{staticClass:"editor-form-item",attrs:{label:"具体内容",prop:"helpContent"}},[t(l["default"],{model:{value:e.submiteForm.helpContent,callback:function(t){e.$set(e.submiteForm,"helpContent",t)},expression:"submiteForm.helpContent"}})],1)],1),t("span",{attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){return e.closeEditFormVisible("ruleForm")}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitingForm("ruleForm")}}},[e._v("提 交")])],1)],1)],1)},u=[],d=(o(57658),o(5376)),m=o(89176),c=o(90886),p=o(30741),h={name:"operational-helps-index",mixins:[p.Q5,p.LI,p.I_,p.oA,p.vd],filters:{transfortext:c.h},data(){return this.rules=b,{loading:!1,queryForm:{words:"",loginName:"",questionDetail:"",creatorRoleName:"",workOrderStatus:"",pageSize:this.$tableDataSize,pageNum:1},dropdowns:{status:[],type:[]},tableData:[],total:0,selectData:[],dialogText:"",submiteForm:{helpCategory:"",helpType:"",helpContent:"",status:""}}},created(){this.getdDropdowns()},methods:{getdDropdowns(){(0,d.Wl)("3030").then((e=>{0===e.code&&(this.dropdowns.status=e.data)})),(0,d.Wl)("448570").then((e=>{0===e.code&&(this.dropdowns.type=e.data)}))},getData(){this.tableData=[],this.loading=!0,(0,m.lf)(this.queryForm).then((e=>{this.loading=!1,this.tableData=e.rows,this.total=e.total})).catch((()=>{this.loading=!1}))},selection(e){this.selectData=e},editing(e,t){this.showEditFormDialogrVisible=!0,"add"===e?(this.dialogText="发布帮助文章",delete this.submiteForm.id,this.submiteForm.helpCategory="",this.submiteForm.helpType="",this.submiteForm.helpContent=""):(this.dialogText="修改帮助文章",this.submiteForm.id=t.id,this.submiteForm.helpCategory=t.helpCategory,this.submiteForm.helpType=t.helpType,this.submiteForm.helpContent=t.helpContent,this.submiteForm.status=t.status)},submitingForm(e){this.$refs[e].validate((e=>{if(!e)return!1;(0,m.vj)({...this.submiteForm,helpCategory:this.dropdowns.type.find((e=>this.submiteForm.helpCategory===e.code_value))}).then((e=>{0===e.code&&(this.$message.success(e.msg),this.closeEditFormVisible("ruleForm"),this.getData())}))}))},handling(e,t){this[e](t)},deleteing(e){if(!e.id&&this.selectData.length<1)return this.$message.warning("请选择删除项"),!1;this.$confirm("一旦删除不可恢复，确定删除？","删除提醒",{distinguishCancelAndClose:!0,confirmButtonText:"确定",cancelButtonText:"放弃"}).then((()=>{let t=[];if(e.id)t.push(e.id);else{t=[];for(let e of this.moreSelect)t.push(e.id)}(0,m.C2)({helpManageIds:t}).then((e=>{0===e.code&&(this.$message.success("删除成功"),this.getData(),this.moreSelect=[])}))})).catch((()=>{}))},changeStatus(e){(0,m.rX)({id:e.id}).then((e=>{0===e.code&&(this.$message.success("成功"),this.getData())}))}}};const b={helpType:[{required:!0,message:"请输入文章标题",trigger:"blur"},{min:3,max:24,message:"长度在 3 到 24 个字符",trigger:"blur"}],helpCategory:[{required:!0,message:"请选择帮助类型",trigger:"change"}],status:[{required:!0,message:"请选择帮助文章发布状态",trigger:"change"}],helpContent:[{required:!0,message:"请填写具体帮助详情",trigger:"blur"}]};var f=h,g=o(1001),y=(0,g.Z)(f,n,u,!1,null,"a69cf570",null),w=y.exports}}]);